<!DOCTYPE html>
<html lang="vi">

<head>
    <!-- Security: Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; 
                   script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://unpkg.com https://www.googletagmanager.com https://www.google-analytics.com; 
                   style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; 
                   font-src 'self' https://fonts.gstatic.com; 
                   img-src 'self' data: https: blob:; 
                   connect-src 'self' https://api.counterapi.dev https://www.google-analytics.com;">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MN222YF1D7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-MN222YF1D7');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Cổng Thông Tin Tuyên Truyền Pháp Luật | Công An Tỉnh Phú Thọ</title>
    <meta name="description"
        content="Cổng thông tin tuyên truyền, phổ biến pháp luật về xuất nhập cảnh, cư trú của người nước ngoài tại Việt Nam.">

    <!-- PWA & SEO -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#D00000">
    <meta property="og:title" content="Tuyên Truyền Pháp Luật - Công An Phú Thọ">
    <meta property="og:description"
        content="Tra cứu văn bản pháp luật và hỏi đáp thủ tục xuất nhập cảnh với Trợ lý ảo AI.">
    <meta property="og:image" content="https://raw.githubusercontent.com/username/repo/main/logo.png">
    <meta property="og:url" content="https://username.github.io/repo/">
    <meta property="og:type" content="website">

    <!-- Preconnect for faster loading -->
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://unpkg.com">

    <!-- Tailwind CSS CDN (Pinned v3.4.17) -->
    <script src="https://cdn.tailwindcss.com/3.4.17"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Playfair+Display:ital,wght@1,400;1,700&family=Dancing+Script:wght@700&display=swap"
        rel="stylesheet">

    <!-- Lucide Icons (deferred for performance - Pinned v0.563.0) -->
    <script defer src="https://unpkg.com/lucide@0.563.0"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'cand-red': '#D00000',
                        'cand-red-dark': '#8B0000',
                        'cand-gold': '#FFD700',
                        'cand-gold-dark': '#B8860B',
                        'cand-gold-light': '#FCEda3',
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                        'playfair': ['Playfair Display', 'serif'],
                        'dancing': ['Dancing Script', 'cursive'],
                    },
                    boxShadow: {
                        'glow': '0 0 15px rgba(255, 215, 0, 0.5)',
                    }
                }
            }
        }
    </script>

    <style>
        * {
            font-family: 'Inter', sans-serif;
        }

        html {
            scroll-behavior: smooth;
        }

        /* Modern Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #D00000;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #8B0000;
        }

        /* Hero Background with Red Texture */
        .hero-section {
            background: linear-gradient(135deg, #D00000 0%, #8B0000 100%);
            position: relative;
            overflow: hidden;
        }

        .hero-pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .hero-overlay {
            background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.3) 100%);
            position: absolute;
            inset: 0;
        }

        /* Text Effects */
        .text-3d {
            text-shadow: 2px 2px 0px #8B0000, 4px 4px 0px rgba(0, 0, 0, 0.2);
        }

        .text-glow {
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        /* Card Effects */
        .modern-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modern-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            border-color: #FFD700;
        }

        /* Animations */
        @keyframes float {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        /* Button Shine */
        .btn-shine {
            position: relative;
            overflow: hidden;
        }

        .btn-shine::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: 0.5s;
        }

        .btn-shine:hover::after {
            left: 100%;
        }

        /* Chat Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in-up {
            animation: fadeInUp 0.3s ease-out forwards;
        }

        .delay-100 {
            animation-delay: 0.1s;
        }

        /* Custom Scrollbar for Chat */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* ========== ACCESSIBILITY ========== */
        /* Skip to main content link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #D00000;
            color: white;
            padding: 8px 16px;
            z-index: 9999;
            transition: top 0.3s;
            text-decoration: none;
            font-weight: bold;
        }

        .skip-link:focus {
            top: 0;
        }

        /* Reduced motion for users who prefer it */
        @media (prefers-reduced-motion: reduce) {

            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }

        /* Better focus states for keyboard navigation */
        a:focus-visible,
        button:focus-visible,
        input:focus-visible {
            outline: 3px solid #FFD700;
            outline-offset: 2px;
        }

        /* ========== PRINT STYLES ========== */
        @media print {

            .hero-section,
            #aiFloatingBtn,
            #header,
            #aiBubble,
            .btn-shine {
                display: none !important;
            }

            body {
                font-size: 12pt;
                line-height: 1.5;
            }

            .modern-card {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ccc;
            }
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800">
    <!-- Skip to main content (Accessibility) -->
    <a href="#main-content" class="skip-link">Chuyển đến nội dung chính / Skip to main content</a>


    <!-- ========== HEADER ========== -->
    <header id="header"
        class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-cand-red-dark/95 backdrop-blur-md shadow-lg border-b border-cand-gold/20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16 md:h-20">
                <!-- Logo -->
                <div class="flex items-center gap-3">
                    <img src="logo.png" alt="Logo" class="w-10 h-10 md:w-12 md:h-12 object-contain drop-shadow-md">
                    <img src="logo-qlxnc.png" alt="QLXNC"
                        class="w-10 h-10 md:w-12 md:h-12 object-contain drop-shadow-md">
                    <div class="hidden md:block">
                        <h1 class="text-white font-bold text-base leading-none" data-i18n="unit_name_1">CÔNG AN TỈNH PHÚ
                            THỌ</h1>
                        <p class="text-cand-gold text-xs font-bold tracking-wider" data-i18n="unit_name_2">PHÒNG QUẢN LÝ
                            XUẤT NHẬP CẢNH</p>
                    </div>
                </div>

                <!-- Campaign Badge (New) -->
                <div class="hidden lg:flex items-center gap-3 ml-4 pl-4 border-l border-white/20">
                    <div class="relative w-10 h-10 flex items-center justify-center animate-pulse">
                        <div class="absolute inset-0 bg-cand-red rounded-full opacity-75 animate-ping"></div>
                        <div
                            class="relative bg-cand-red border-2 border-cand-gold rounded-full w-10 h-10 flex items-center justify-center shadow-glow z-10">
                            <i data-lucide="award" class="w-5 h-5 text-cand-gold"></i>
                        </div>
                    </div>
                    <div class="flex flex-col">
                        <span class="text-cand-gold font-bold text-sm uppercase leading-none filter drop-shadow-sm"
                            data-i18n="campaign_peak">Cao
                            điểm 70 ngày đêm</span>
                        <span class="text-white text-xs font-medium" data-i18n="campaign_digital">Tiên phong chuyển đổi
                            số</span>
                    </div>
                </div>

                <!-- Desktop Nav -->
                <nav class="hidden md:flex items-center gap-6">
                    <a href="#home" class="text-white/90 hover:text-cand-gold font-medium transition-colors"
                        data-i18n="home">Trang chủ</a>
                    <a href="#documents" class="text-white/90 hover:text-cand-gold font-medium transition-colors"
                        data-i18n="documents">Văn bản</a>
                    <a href="#ai-assistant"
                        class="px-5 py-2 bg-gradient-to-r from-cand-gold to-cand-gold-dark text-white font-bold rounded-full shadow-lg hover:shadow-glow transition-all transform hover:scale-105"
                        data-i18n="ai_assistant">
                        Hỏi đáp AI
                    </a>
                    <!-- Language Switcher -->
                    <div id="langSwitcher"
                        class="flex items-center gap-2 ml-2 bg-black/20 px-3 py-1.5 rounded-full border border-white/10 relative">
                        <button onclick="setLanguage('vi')"
                            class="text-cand-gold font-bold text-sm hover:text-white transition-colors"
                            id="lang-btn-vi">VN</button>
                        <span class="text-white/40 text-xs">|</span>
                        <button onclick="setLanguage('en')"
                            class="text-white/70 text-sm hover:text-cand-gold transition-colors"
                            id="lang-btn-en">EN</button>
                        <span class="text-white/40 text-xs">|</span>
                        <button onclick="setLanguage('zh')"
                            class="text-white/70 text-sm hover:text-cand-gold transition-colors"
                            id="lang-btn-zh">CN</button>
                    </div>
                </nav>

                <!-- Mobile Language Switcher (visible on mobile only) -->
                <div class="flex items-center gap-2 md:hidden">
                    <div class="flex items-center gap-1 bg-black/20 px-2 py-1 rounded-full border border-white/10">
                        <button onclick="setLanguage('vi')"
                            class="text-cand-gold font-bold text-xs hover:text-white transition-colors"
                            id="mob-header-lang-vi">VN</button>
                        <span class="text-white/40 text-xs">|</span>
                        <button onclick="setLanguage('en')"
                            class="text-white/70 text-xs hover:text-cand-gold transition-colors"
                            id="mob-header-lang-en">EN</button>
                        <span class="text-white/40 text-xs">|</span>
                        <button onclick="setLanguage('zh')"
                            class="text-white/70 text-xs hover:text-cand-gold transition-colors"
                            id="mob-header-lang-zh">CN</button>
                    </div>

                    <!-- Mobile Menu Button -->
                    <button id="mobileMenuBtn" aria-label="Menu chính" aria-expanded="false"
                        class="text-white p-2 hover:bg-white/10 rounded-lg transition-colors">
                        <i data-lucide="menu" class="w-7 h-7"></i>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu Dropdown -->
            <div id="mobileMenu"
                class="hidden md:hidden border-t border-white/10 overflow-hidden transition-all duration-300 ease-in-out">
                <div class="py-4 space-y-2 flex flex-col">
                    <a href="#home"
                        class="block px-4 py-2 text-white/90 hover:bg-white/10 hover:text-cand-gold transition-colors rounded-lg"
                        onclick="toggleMobileMenu()" data-i18n="home">Trang chủ</a>
                    <a href="#documents"
                        class="block px-4 py-2 text-white/90 hover:bg-white/10 hover:text-cand-gold transition-colors rounded-lg"
                        onclick="toggleMobileMenu()" data-i18n="documents">Văn bản</a>
                    <a href="#ai-assistant"
                        class="block px-4 py-2 text-white/90 hover:bg-white/10 hover:text-cand-gold transition-colors rounded-lg"
                        onclick="toggleMobileMenu()" data-i18n="ai_assistant">Hỏi đáp AI</a>

                    <div class="px-4 pt-2 mt-2 border-t border-white/10 flex items-center gap-4">
                        <span class="text-white/60 text-sm" data-i18n="language">Ngôn ngữ:</span>
                        <div
                            class="flex items-center gap-2 bg-black/20 px-3 py-1.5 rounded-full border border-white/10">
                            <button onclick="setLanguage('vi')"
                                class="text-cand-gold font-bold text-sm hover:text-white transition-colors"
                                id="mob-lang-vi">VN</button>
                            <span class="text-white/40 text-xs">|</span>
                            <button onclick="setLanguage('en')"
                                class="text-white/70 text-sm hover:text-cand-gold transition-colors"
                                id="mob-lang-en">EN</button>
                            <span class="text-white/40 text-xs">|</span>
                            <button onclick="setLanguage('zh')"
                                class="text-white/70 text-sm hover:text-cand-gold transition-colors"
                                id="mob-lang-zh">CN</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- ========== HERO SECTION (BA NHAT) ========== -->
    <section id="home" class="hero-section min-h-screen flex items-center justify-center pt-20 relative">
        <div class="hero-pattern"></div>
        <div class="hero-overlay"></div>

        <!-- Background Image optional overlay -->
        <div class="absolute inset-0 opacity-20 pointer-events-none mix-blend-overlay"
            style="background-image: url('ba-nhat-banner.jpg'); background-size: cover; background-position: center;">
        </div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center py-16">

            <!-- Logo Block -->
            <div class="mb-2 flex flex-col items-center justify-center">
                <img src="logo.png" alt="CAND" class="w-20 h-20 md:w-24 md:h-24 object-contain drop-shadow-2xl mb-2">
                <h2 class="text-white font-bold text-sm md:text-base leading-tight" data-i18n="unit_name_1">CÔNG AN TỈNH
                    PHÚ THỌ</h2>
                <p class="text-cand-gold font-bold text-xs md:text-sm tracking-wider" data-i18n="unit_name_2">PHÒNG QUẢN
                    LÝ XUẤT NHẬP CẢNH</p>
            </div>

            <div class="mb-6">
                <div
                    class="inline-flex flex-col items-center justify-center px-8 py-4 rounded-3xl bg-red-900/90 backdrop-blur-md border border-cand-gold shadow-xl max-w-4xl">
                    <span class="text-cand-gold font-bold uppercase text-xs md:text-sm tracking-widest mb-1"
                        data-i18n="anniv_line1">Công trình thanh niên chào mừng</span>
                    <span
                        class="text-white font-bold uppercase text-[10px] md:text-base tracking-wide leading-tight mt-1"
                        data-i18n="anniv_line2">95 năm thành lập Đoàn TNCS Hồ Chí Minh</span>
                    <span
                        class="text-white font-bold uppercase text-[10px] md:text-base tracking-wide leading-tight mt-1"
                        data-i18n="anniv_line3">70 năm truyền thống Đoàn Bộ Công an</span>
                </div>
            </div>

            <p class="font-dancing text-2xl md:text-4xl text-white mb-2 tracking-wide font-bold drop-shadow-md"
                data-i18n="hero_movement">Phong
                trào thi đua</p>

            <h1 class="font-black text-6xl md:text-8xl lg:text-9xl text-cand-gold text-3d mb-8 tracking-tighter uppercase relative inline-block"
                data-i18n="hero_3best">
                BA NHẤT
                <!-- Stars -->
                <div class="flex justify-center gap-4 mt-2 mb-4 text-cand-gold text-2xl md:text-4xl">
                    <i data-lucide="star"
                        class="fill-current w-8 h-8 md:w-12 md:h-12 filter drop-shadow hover:scale-125 transition-transform duration-300"></i>
                    <i data-lucide="star"
                        class="fill-current w-8 h-8 md:w-12 md:h-12 filter drop-shadow -mt-4 hover:scale-125 transition-transform duration-300"></i>
                    <i data-lucide="star"
                        class="fill-current w-8 h-8 md:w-12 md:h-12 filter drop-shadow hover:scale-125 transition-transform duration-300"></i>
                </div>
            </h1>

            <div class="space-y-4 md:space-y-6 mb-12">
                <div class="transform hover:scale-105 transition-transform duration-300">
                    <h2 class="text-3xl md:text-5xl font-bold text-white uppercase tracking-tight drop-shadow-lg">
                        <span class="text-cand-gold">"</span><span data-i18n="best_discipline">KỶ LUẬT NHẤT</span><span
                            class="text-cand-gold">"</span>
                    </h2>
                </div>
                <div class="transform hover:scale-105 transition-transform duration-300">
                    <h2 class="text-3xl md:text-5xl font-bold text-white uppercase tracking-tight drop-shadow-lg">
                        <span class="text-cand-gold">"</span><span data-i18n="best_loyalty">TRUNG THÀNH NHẤT</span><span
                            class="text-cand-gold">"</span>
                    </h2>
                </div>
                <div class="transform hover:scale-105 transition-transform duration-300">
                    <h2 class="text-3xl md:text-5xl font-bold text-white uppercase tracking-tight drop-shadow-lg">
                        <span class="text-cand-gold">"</span><span data-i18n="best_closeness">GẦN DÂN NHẤT</span><span
                            class="text-cand-gold">"</span>
                    </h2>
                </div>
            </div>

            <div class="max-w-3xl mx-auto border-t border-cand-gold/50 pt-6 mt-6">
                <div class="flex flex-col gap-2 text-white/90 text-sm md:text-lg font-bold uppercase tracking-wider">
                    <p data-i18n="motto_1">KỶ LUẬT LÀ NỀN TẢNG</p>
                    <p data-i18n="motto_2">TRUNG THÀNH LÀ CỐT LÕI</p>
                    <p data-i18n="motto_3">GẦN DÂN LÀ THƯỚC ĐO</p>
                </div>
            </div>

            <div class="mt-12 flex flex-col sm:flex-row gap-4 justify-center">
                <a href="#documents"
                    class="px-8 py-4 bg-white text-cand-red-dark font-bold rounded-full shadow-xl hover:bg-gray-100 transition-all btn-shine flex items-center justify-center gap-2">
                    <i data-lucide="file-text" class="w-5 h-5"></i>
                    <span data-i18n="search_docs">Tra cứu Văn bản</span>
                </a>
                <a href="#ai-assistant"
                    class="px-8 py-4 bg-cand-gold text-cand-red-dark font-bold rounded-full shadow-xl hover:bg-cand-gold-dark hover:text-white transition-all btn-shine flex items-center justify-center gap-2">
                    <i data-lucide="bot" class="w-5 h-5"></i>
                    <span data-i18n="ask_ai">Hỏi Trợ lý AI</span>
                </a>
            </div>
        </div>

        <!-- Bottom Wave optional -->
        <div class="absolute bottom-0 left-0 w-full overflow-hidden leading-none">
            <svg class="relative block w-full h-[50px] md:h-[100px]" data-name="Layer 1"
                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path
                    d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"
                    class="fill-gray-50"></path>
            </svg>
        </div>
    </section>

    <!-- ========== DOCUMENTS SECTION ========== -->
    <main id="main-content">
        <section id="documents" class="py-20 bg-gray-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h3 class="text-3xl md:text-5xl font-bold text-cand-red-dark mb-4 drop-shadow-sm font-playfair"
                        data-i18n="docs_title">Kho Văn Bản Pháp Luật</h3>
                    <div class="w-24 h-1 bg-cand-gold mx-auto rounded-full"></div>
                </div>

                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Card 1 -->
                    <div class="modern-card rounded-2xl p-6 md:p-8 relative group">
                        <div
                            class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-cand-red to-cand-gold rounded-t-2xl">
                        </div>
                        <div
                            class="w-14 h-14 bg-cand-red/10 rounded-full flex items-center justify-center mb-4 group-hover:bg-cand-red group-hover:text-white transition-colors duration-300">
                            <i data-lucide="gavel" class="w-7 h-7 text-cand-red group-hover:text-white"></i>
                        </div>
                        <span
                            class="inline-block px-3 py-1 bg-cand-red/10 text-cand-red text-xs font-bold rounded-full mb-3 border border-cand-red/20"
                            data-i18n="tag_decree">NGHỊ
                            ĐỊNH</span>
                        <h4 class="text-xl font-bold text-gray-900 mb-3 group-hover:text-cand-red transition-colors"
                            data-i18n="doc1_title">Nghị
                            định 282/2025/NĐ-CP</h4>
                        <p class="text-gray-600 text-sm mb-4 line-clamp-3" data-i18n="doc1_desc">Quy định xử phạt vi
                            phạm
                            hành chính trong lĩnh
                            vực an ninh, trật tự, an toàn xã hội.</p>



                        <div class="flex gap-3 mt-auto">
                            <button onclick="openModal('doc1')"
                                class="flex-1 py-2 border border-cand-red text-cand-red rounded-lg font-semibold hover:bg-cand-red hover:text-white transition-all"
                                data-i18n="view_quick">Xem
                                nhanh</button>
                            <a href="2025_1583_1584_282_2025_ND_CP.pdf" target="_blank" rel="noopener noreferrer"
                                class="flex-1 py-2 bg-cand-red text-white rounded-lg font-semibold text-center hover:bg-cand-red-dark hover:shadow-lg transition-all"
                                data-i18n="open_file">Mở
                                file</a>
                        </div>
                    </div>

                    <!-- Card 2 -->
                    <div class="modern-card rounded-2xl p-6 md:p-8 relative group">
                        <div
                            class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-cand-red to-cand-gold rounded-t-2xl">
                        </div>
                        <div
                            class="w-14 h-14 bg-cand-red/10 rounded-full flex items-center justify-center mb-4 group-hover:bg-cand-red group-hover:text-white transition-colors duration-300">
                            <i data-lucide="book" class="w-7 h-7 text-cand-red group-hover:text-white"></i>
                        </div>
                        <span
                            class="inline-block px-3 py-1 bg-cand-red/10 text-cand-red text-xs font-bold rounded-full mb-3 border border-cand-red/20"
                            data-i18n="tag_law">LUẬT</span>
                        <h4 class="text-xl font-bold text-gray-900 mb-3 group-hover:text-cand-red transition-colors"
                            data-i18n="doc2_title">LUẬT
                            NHẬP CẢNH, XUẤT CẢNH, QUÁ CẢNH, CƯ TRÚ CỦA NGƯỜI NƯỚC NGOÀI TẠI VIỆT NAM</h4>
                        <p class="text-gray-600 text-sm mb-4 line-clamp-3" data-i18n="doc2_desc">Văn bản hợp nhất quy
                            định
                            về nhập cảnh, xuất
                            cảnh, quá cảnh, cư trú của người nước ngoài.</p>



                        <div class="flex gap-3 mt-auto">
                            <button onclick="openModal('doc2')"
                                class="flex-1 py-2 border border-cand-red text-cand-red rounded-lg font-semibold hover:bg-cand-red hover:text-white transition-all"
                                data-i18n="view_quick">Xem
                                nhanh</button>
                            <a href="2023_1257_1258_30_VBHN_VPQH.pdf" target="_blank" rel="noopener noreferrer"
                                class="flex-1 py-2 bg-cand-red text-white rounded-lg font-semibold text-center hover:bg-cand-red-dark hover:shadow-lg transition-all"
                                data-i18n="open_file">Mở
                                file</a>
                        </div>
                    </div>

                    <!-- Card 3 -->
                    <div class="modern-card rounded-2xl p-6 md:p-8 relative group">
                        <div
                            class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-cand-red to-cand-gold rounded-t-2xl">
                        </div>
                        <div
                            class="w-14 h-14 bg-cand-red/10 rounded-full flex items-center justify-center mb-4 group-hover:bg-cand-red group-hover:text-white transition-colors duration-300">
                            <i data-lucide="landmark" class="w-7 h-7 text-cand-red group-hover:text-white"></i>
                        </div>
                        <span
                            class="inline-block px-3 py-1 bg-cand-red/10 text-cand-red text-xs font-bold rounded-full mb-3 border border-cand-red/20"
                            data-i18n="tag_regulation">QUY
                            CHẾ</span>
                        <h4 class="text-xl font-bold text-gray-900 mb-3 group-hover:text-cand-red transition-colors"
                            data-i18n="doc3_title">Quy chế
                            phối hợp trong quản lý người nước ngoài cư trú, hoạt động trên địa bàn tỉnh Phú Thọ</h4>
                        <p class="text-gray-600 text-sm mb-4 line-clamp-3" data-i18n="doc3_desc">Quy định về phối hợp
                            quản
                            lý người nước ngoài
                            trên địa bàn tỉnh Phú Thọ.</p>



                        <div class="flex gap-3 mt-auto">
                            <button onclick="openModal('doc3')"
                                class="flex-1 py-2 border border-cand-red text-cand-red rounded-lg font-semibold hover:bg-cand-red hover:text-white transition-all"
                                data-i18n="view_quick">Xem
                                nhanh</button>
                            <a href="Quy_che_phoi_hop_quan_ly_NNN_Phu_Tho.pdf" target="_blank" rel="noopener noreferrer"
                                class="flex-1 py-2 bg-cand-red text-white rounded-lg font-semibold text-center hover:bg-cand-red-dark hover:shadow-lg transition-all"
                                data-i18n="open_file">Mở
                                file</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========== AI ASSISTANT SECTION ========== -->
        <section id="ai-assistant" class="py-20 bg-white relative overflow-hidden">
            <div class="absolute top-0 right-0 w-1/3 h-full bg-cand-red/5 skew-x-12 transform translate-x-32"></div>
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                <div class="flex flex-col lg:flex-row items-center gap-16">
                    <div class="lg:w-1/2">
                        <div class="flex items-center gap-3 mb-6">
                            <img src="icon.png" alt="Biểu tượng trợ lý AI" loading="lazy" decoding="async"
                                class="w-12 h-12 md:w-16 md:h-16 object-contain drop-shadow-md">
                            <h3 class="text-2xl sm:text-3xl md:text-5xl font-bold text-cand-red-dark font-playfair leading-tight whitespace-nowrap"
                                data-i18n="ai_section_title">
                                Trợ Lý Ảo Pháp Luật
                            </h3>
                        </div>
                        <p class="text-lg text-gray-600 mb-8 leading-relaxed" data-i18n="ai_section_desc">
                            Hệ thống giải đáp tự động thông minh, giúp bạn tra cứu nhanh chóng các quy định về xuất nhập
                            cảnh. Chính xác - Nhanh chóng - Tiện lợi.
                        </p>
                        <a href="https://notebooklm.google.com/notebook/03f2338f-f7f7-4adf-aba3-52b93672b484"
                            target="_blank" rel="noopener noreferrer"
                            class="inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-cand-red to-cand-red-dark text-white font-bold rounded-full shadow-lg hover:shadow-glow hover:scale-105 transition-all duration-300">
                            <i data-lucide="message-circle" class="w-6 h-6"></i>
                            <span data-i18n="chat_now">Trò chuyện ngay</span>
                        </a>
                    </div>
                    <div class="lg:w-1/2 relative">
                        <div class="relative z-10 bg-white rounded-3xl shadow-2xl p-2 border border-gray-100">
                            <div class="bg-gray-50 rounded-2xl p-6 md:p-8 flex flex-col h-[450px]">
                                <!-- Chat Header -->
                                <div class="flex items-center gap-4 mb-4 border-b border-gray-200 pb-4 shrink-0">
                                    <div
                                        class="w-12 h-12 bg-cand-red rounded-full flex items-center justify-center text-white shadow-md relative">
                                        <i data-lucide="bot" class="w-6 h-6"></i>
                                        <span
                                            class="absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 border-2 border-white rounded-full"></span>
                                    </div>
                                    <div>
                                        <h5 class="font-bold text-gray-900 text-lg" data-i18n="ai_name">Trợ lý AI</h5>
                                        <span
                                            class="text-green-600 text-xs font-bold flex items-center gap-1 bg-green-100 px-2 py-0.5 rounded-full w-fit">
                                            <span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></span>
                                            <span data-i18n="online_status">Sẵn sàng hỗ trợ</span>
                                        </span>
                                    </div>
                                </div>

                                <!-- Chat History (Scrollable) -->
                                <div id="chatHistory"
                                    class="flex-1 overflow-y-auto space-y-4 mb-4 pr-2 custom-scrollbar">
                                    <!-- AI Welcome Message -->
                                    <div class="flex justify-start animate-fade-in-up">
                                        <div
                                            class="bg-white text-gray-800 border border-gray-200 px-4 py-3 rounded-2xl rounded-tl-sm shadow-sm max-w-[90%]">
                                            <p class="text-sm leading-relaxed" data-i18n="ai_welcome">
                                                Xin chào! Tôi là Trợ lý AI pháp luật. Bạn muốn hỏi gì về thủ tục xuất
                                                nhập
                                                cảnh hôm nay?
                                            </p>
                                        </div>
                                    </div>
                                    <!-- Suggested Questions -->
                                    <div class="flex flex-wrap gap-2 animate-fade-in-up delay-100">
                                        <button onclick="fillChat('Thủ tục làm hộ chiếu?')"
                                            class="text-xs bg-white border border-cand-gold text-gray-600 px-3 py-1.5 rounded-full hover:bg-cand-gold hover:text-white transition-colors">
                                            Thủ tục làm hộ chiếu?
                                        </button>
                                        <button onclick="fillChat('Gia hạn visa cho người nước ngoài?')"
                                            class="text-xs bg-white border border-cand-gold text-gray-600 px-3 py-1.5 rounded-full hover:bg-cand-gold hover:text-white transition-colors">
                                            Gia hạn visa?
                                        </button>
                                    </div>
                                </div>

                                <!-- Input Area -->
                                <div class="relative shrink-0 pt-2 border-t border-gray-100">
                                    <input type="text" id="fakeChatInput"
                                        class="w-full pl-4 pr-12 py-3.5 rounded-xl border border-gray-200 bg-white focus:outline-none focus:border-cand-red focus:ring-2 focus:ring-cand-red/20 transition-all shadow-sm text-sm"
                                        placeholder="Nhập câu hỏi của bạn..." onkeypress="handleChatEnter(event)">
                                    <button onclick="handleChatSend()"
                                        class="absolute right-2 top-1/2 mt-1 -translate-y-1/2 w-9 h-9 bg-cand-red text-white rounded-lg flex items-center justify-center hover:bg-cand-red-dark transition-colors shadow-md hover:shadow-lg transform active:scale-95">
                                        <i data-lucide="send" class="w-4 h-4 ml-0.5"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Decorative blobs -->
                            <div
                                class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-cand-gold/20 filter blur-3xl -z-10 rounded-full">
                            </div>
                        </div>
                    </div>
                </div>
        </section>

        <!-- ========== FOOTER ========== -->
        <footer class="bg-cand-red-dark text-white pt-16 pb-8 border-t-4 border-cand-gold">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex flex-col items-center justify-center text-center mb-8">
                    <div class="flex items-center gap-3 mb-4">
                        <!-- Bolt: Added lazy loading for offscreen image -->
                        <img src="logo.png" alt="Logo" loading="lazy" decoding="async"
                            class="w-12 h-12 object-contain bg-white rounded-full p-1">
                        <div class="text-left">
                            <h4 class="font-bold text-lg leading-none" data-i18n="unit_name_1">CÔNG AN TỈNH PHÚ THỌ</h4>
                            <p class="text-cand-gold text-xs font-bold mt-1" data-i18n="footer_slogan">VÌ NƯỚC QUÊN THÂN
                                -
                                VÌ DÂN PHỤC VỤ</p>
                            <p class="text-white/90 text-sm font-bold mt-2 uppercase tracking-wide border-t border-white/20 pt-2"
                                data-i18n="footer_action">
                                Tuổi trẻ Công an Đất Tổ: Xung kích - Lập công - Vì an ninh Tổ quốc
                            </p>
                        </div>
                    </div>
                </div>
                <!-- Visitor Stats -->
                <!-- Visitor Stats -->
                <div class="grid grid-cols-2 gap-4 max-w-sm mx-auto mb-8 border-t border-b border-white/10 py-6">
                    <!-- Removed Online Stats as requested -->
                    <div class="text-center">
                        <p class="text-cand-gold font-bold text-xl" id="stat-today">...</p>
                        <p class="text-white/70 text-xs uppercase" data-i18n="stat_today">Hôm nay</p>
                    </div>
                    <div class="text-center border-l border-white/10">
                        <p class="text-cand-gold font-bold text-xl" id="stat-total">...</p>
                        <p class="text-white/70 text-xs uppercase" data-i18n="stat_total">Tổng truy cập</p>
                    </div>
                </div>

                <div class="border-t border-white/10 pt-8 text-center">
                    <p class="text-white/60 text-sm font-medium uppercase tracking-wide" data-i18n="designed_by_label">
                        Thiết
                        kế bởi Đại úy Vi Ngọc Phương
                    </p>
                    <p class="text-white/60 text-sm font-medium uppercase tracking-wide mt-1"
                        data-i18n="designed_by_role">
                        Bí thư Chi đoàn ghép Phòng
                        PA01-PA08</p>
                </div>
            </div>
        </footer>
    </main>

    <!-- ========== FLOATING BUTTON ========== -->
    <a id="aiFloatingBtn" href="https://notebooklm.google.com/notebook/03f2338f-f7f7-4adf-aba3-52b93672b484"
        target="_blank" rel="noopener noreferrer" class="fixed bottom-0 right-4 z-50 flex items-end group">

        <!-- Speech Bubble -->
        <div id="aiBubble"
            class="mb-28 mr-2 bg-white border-2 border-cand-gold text-gray-800 px-3 py-2 rounded-xl rounded-br-none shadow-lg max-w-[160px] relative transition-all duration-500 opacity-100 transform translate-y-0">
            <p class="text-xs font-bold leading-tight" data-i18n="bubble_text">Xin chào ! Tôi là Trợ lý AI, bạn có
                cần
                giúp gì không?</p>
            <div
                class="absolute -right-2 bottom-0 w-0 h-0 border-l-[8px] border-l-transparent border-t-[8px] border-t-cand-gold border-r-[8px] border-r-transparent transform -skew-x-12">
            </div>
        </div>

        <!-- Character -->
        <img src="icon.png"
            class="w-32 h-32 md:w-40 md:h-40 object-contain drop-shadow-2xl hover:scale-105 transition-transform duration-300"
            alt="Chat">
    </a>

    <!-- ========== MODAL (SAME LOGIC) ========== -->
    <div id="docModal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="closeModal()"></div>
        <div class="absolute inset-4 md:inset-20 bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col animate-float"
            style="animation: none;">
            <div class="flex items-center justify-between p-6 bg-cand-red-dark text-white">
                <h3 id="modalTitle" class="text-xl font-bold">Title</h3>
                <button onclick="closeModal()" aria-label="Đóng" class="hover:bg-white/20 p-2 rounded-lg"><i
                        data-lucide="x"></i></button>
            </div>
            <div id="modalBody" class="flex-1 p-6 overflow-y-auto"></div>
            <div class="p-6 bg-gray-50 flex justify-end gap-3">
                <button onclick="closeModal()" class="px-6 py-2 border rounded-lg hover:bg-gray-100"
                    data-i18n="close_btn">Đóng</button>
                <a id="modalPdfLink" href="#" target="_blank" rel="noopener noreferrer"
                    class="px-6 py-2 bg-cand-red text-white rounded-lg hover:bg-cand-red-dark"
                    data-i18n="view_details_btn">Xem chi tiết</a>
            </div>
        </div>
    </div>

    <!-- ========== ONBOARDING REMOVED ========== -->

    <!-- ========== WELCOME MODAL ========== -->
    <div id="welcomeModal" class="fixed inset-0 z-[110] hidden">
        <div class="absolute inset-0 bg-black/70 backdrop-blur-md"></div>
        <div class="absolute inset-0 flex items-center justify-center p-4">
            <div
                class="bg-white rounded-3xl shadow-2xl overflow-hidden max-w-lg w-full transform scale-100 animate-pulse-once">
                <!-- Header -->
                <div class="bg-gradient-to-r from-cand-red to-cand-red-dark p-6 text-center">
                    <div class="flex items-center justify-center gap-3 mb-4">
                        <img src="logo.png" alt="Logo Công an"
                            class="w-16 h-16 md:w-20 md:h-20 object-contain drop-shadow-lg">
                        <img src="logo-qlxnc.png" alt="Logo QLXNC"
                            class="w-16 h-16 md:w-20 md:h-20 object-contain drop-shadow-lg">
                    </div>
                    <h2 class="text-2xl md:text-3xl font-bold text-cand-gold uppercase tracking-wide"
                        id="welcome-title">Chào mừng bạn!</h2>
                    <p class="text-white text-base md:text-lg mt-2 font-medium" id="welcome-subtitle">Cổng thông tin
                        tuyên truyền pháp luật</p>
                    <p class="text-white/70 text-xs mt-1" id="welcome-org">Phòng Quản lý xuất nhập cảnh - Công an
                        tỉnh
                        Phú Thọ</p>
                </div>

                <!-- Body -->
                <div class="p-6 space-y-4">
                    <div class="bg-red-50 border border-red-200 rounded-xl p-3 text-center mb-2">
                        <h3 class="text-cand-red font-bold uppercase text-sm" id="welcome-campaign-title"
                            data-i18n="welcome_campaign_title">Cao điểm 70 ngày đêm</h3>
                        <p class="text-gray-700 text-xs mt-1" id="welcome-campaign-desc"
                            data-i18n="welcome_campaign_desc">Tiên phong chuyển đổi số - Lập thành tích chào mừng
                            các
                            ngày lễ lớn.</p>
                    </div>

                    <p class="text-gray-600 text-center text-sm" id="welcome-intro">Khám phá các tính năng chính của
                        chúng tôi:</p>

                    <div class="space-y-3">
                        <!-- Feature 1: Documents -->
                        <div class="flex items-start gap-4 p-3 bg-blue-50 rounded-xl border border-blue-100">
                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center shrink-0">
                                <i data-lucide="book-open" class="w-5 h-5 text-white"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-900 text-sm" id="welcome-feat1-title">Thư Viện Văn
                                    Bản
                                    Pháp Luật</h4>
                                <p class="text-gray-600 text-xs" id="welcome-feat1-desc">Tra cứu nhanh các nghị
                                    định,
                                    luật và quy chế về xuất nhập cảnh.</p>
                            </div>
                        </div>

                        <!-- Feature 2: Quick View -->
                        <div class="flex items-start gap-4 p-3 bg-red-50 rounded-xl border border-red-100">
                            <div class="w-10 h-10 bg-cand-red rounded-full flex items-center justify-center shrink-0">
                                <i data-lucide="zap" class="w-5 h-5 text-white"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-900 text-sm" id="welcome-feat2-title">Xem Nhanh & Tóm
                                    Tắt
                                </h4>
                                <p class="text-gray-600 text-xs" id="welcome-feat2-desc">Nắm bắt nội dung chính của
                                    văn
                                    bản mà không cần mở file PDF.</p>
                            </div>
                        </div>

                        <!-- Feature 3: AI Assistant -->
                        <div class="flex items-start gap-4 p-3 bg-amber-50 rounded-xl border border-amber-100">
                            <div class="w-10 h-10 bg-amber-500 rounded-full flex items-center justify-center shrink-0">
                                <i data-lucide="bot" class="w-5 h-5 text-white"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-900 text-sm" id="welcome-feat3-title">Trợ Lý AI Pháp
                                    Luật
                                </h4>
                                <p class="text-gray-600 text-xs" id="welcome-feat3-desc">Hỏi đáp thủ tục visa, cư
                                    trú
                                    với trí tuệ nhân tạo 24/7.</p>
                            </div>
                        </div>

                        <!-- Feature 4: Bilingual -->
                        <div class="flex items-start gap-4 p-3 bg-green-50 rounded-xl border border-green-100">
                            <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center shrink-0">
                                <i data-lucide="languages" class="w-5 h-5 text-white"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-900 text-sm" id="welcome-feat4-title">Hỗ trợ Song ngữ
                                </h4>
                                <p class="text-gray-600 text-xs" id="welcome-feat4-desc">Giao diện và nội dung có
                                    sẵn
                                    bằng cả Tiếng Việt và Tiếng Anh.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="px-6 pb-6">
                    <button onclick="closeWelcomeModal()"
                        class="w-full py-3 bg-gradient-to-r from-cand-red to-cand-red-dark text-white font-bold rounded-xl shadow-lg hover:shadow-glow hover:scale-[1.02] transition-all duration-300 flex items-center justify-center gap-2">
                        <span id="welcome-btn">Bắt đầu khám phá</span>
                        <i data-lucide="arrow-right" class="w-5 h-5"></i>
                    </button>
                    <label class="flex items-center justify-center gap-2 mt-3 text-xs text-gray-500 cursor-pointer">
                        <input type="checkbox" id="dontShowAgain"
                            class="rounded border-gray-300 text-cand-red focus:ring-cand-red">
                        <span id="welcome-checkbox">Không hiển thị lại</span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        lucide.createIcons();

        // ========== MULTI-LANGUAGE SUPPORT ==========
        const translations = {
            vi: {
                home: "Trang chủ",
                documents: "Văn bản",
                ai_assistant: "Hỏi đáp AI",
                language: "Ngôn ngữ:",
                search_docs: "Tra cứu Văn bản",
                ask_ai: "Hỏi Trợ lý AI",
                docs_title: "Kho Văn Bản Pháp Luật",
                view_quick: "Xem nhanh",
                open_file: "Mở file",
                motto_1: "KỶ LUẬT LÀ NỀN TẢNG",
                motto_2: "TRUNG THÀNH LÀ CỐT LÕI",
                motto_3: "GẦN DÂN LÀ THƯỚC ĐO",
                unit_name_1: "CÔNG AN TỈNH PHÚ THỌ",
                unit_name_2: "PHÒNG QUẢN LÝ XUẤT NHẬP CẢNH",
                hero_movement: "Phong trào thi đua",
                hero_3best: "BA NHẤT",
                best_discipline: "KỶ LUẬT NHẤT",
                best_loyalty: "TRUNG THÀNH NHẤT",
                best_closeness: "GẦN DÂN NHẤT",
                tag_decree: "NGHỊ ĐỊNH",
                tag_law: "LUẬT",
                tag_regulation: "QUY CHẾ",
                doc1_title: "Nghị định 282/2025/NĐ-CP",
                doc1_desc: "Quy định xử phạt vi phạm hành chính trong lĩnh vực an ninh, trật tự, an toàn xã hội.",
                doc2_title: "LUẬT NHẬP CẢNH, XUẤT CẢNH, QUÁ CẢNH, CƯ TRÚ CỦA NGƯỜI NƯỚC NGOÀI TẠI VIỆT NAM",
                doc2_desc: "Văn bản hợp nhất quy định về nhập cảnh, xuất cảnh, quá cảnh, cư trú của người nước ngoài.",
                doc3_title: "Quy chế phối hợp trong quản lý người nước ngoài cư trú, hoạt động trên địa bàn tỉnh Phú Thọ",
                doc3_desc: "Quy định về phối hợp quản lý người nước ngoài trên địa bàn tỉnh Phú Thọ.",
                ai_section_title: "Trợ Lý Ảo Pháp Luật",
                ai_section_desc: "Hệ thống giải đáp tự động thông minh, giúp bạn tra cứu nhanh chóng các quy định về xuất nhập cảnh. Chính xác - Nhanh chóng - Tiện lợi.",
                chat_now: "Trò chuyện ngay",
                ai_name: "Trợ lý AI",
                chat_demo_q: "Thủ tục gia hạn visa du lịch gồm những gì?",
                chat_demo_a: "Theo quy định mới nhất, bạn cần chuẩn bị: Hộ chiếu gốc, tờ khai NA5, và xác nhận tạm trú...",
                footer_slogan: "VÌ NƯỚC QUÊN THÂN - VÌ DÂN PHỤC VỤ",
                designed_by_label: "Thiết kế bởi Đại úy Vi Ngọc Phương",
                designed_by_role: "Bí thư Chi đoàn ghép Phòng PA01-PA08",
                online_status: "Online",
                online_status: "Online",
                bubble_text: "Xin chào ! Tôi là Trợ lý AI, bạn có cần giúp gì không?",
                campaign_peak: "Cao điểm 70 ngày đêm",
                campaign_digital: "Tiên phong chuyển đổi số",
                campaign_peak: "Cao điểm 70 ngày đêm",
                campaign_digital: "Tiên phong chuyển đổi số",
                anniv_line1: "Công trình thanh niên chào mừng",
                anniv_line2: "95 năm thành lập Đoàn TNCS Hồ Chí Minh",
                anniv_line3: "70 năm truyền thống Đoàn Bộ Công an",
                footer_action: "Tuổi trẻ Công an Đất Tổ: Xung kích - Lập công - Vì an ninh Tổ quốc",
                close_btn: "Đóng",
                view_details_btn: "Xem chi tiết",
                stat_online: "Đang Online",
                stat_today: "Hôm nay",
                stat_total: "Tổng truy cập"
            },
            en: {
                home: "Home",
                documents: "Legal Docs",
                ai_assistant: "AI Assistant",
                language: "Language:",
                search_docs: "Search Documents",
                ask_ai: "Ask AI Assistant",
                docs_title: "Legal Documents Library",
                view_quick: "Quick View",
                open_file: "Open File",
                motto_1: "DISCIPLINE IS THE FOUNDATION",
                motto_2: "LOYALTY IS THE CORE",
                motto_3: "CLOSENESS TO PEOPLE IS THE MEASURE",
                unit_name_1: "PHU THO PROVINCIAL POLICE",
                unit_name_2: "IMMIGRATION DEPARTMENT",
                hero_movement: "Emulation Movement",
                hero_3best: "THREE BESTs",
                best_discipline: "MOST DISCIPLINED",
                best_loyalty: "MOST LOYAL",
                best_closeness: "CLOSEST TO PEOPLE",
                tag_decree: "DECREE",
                tag_law: "LAW",
                tag_regulation: "REGULATION",
                doc1_title: "Decree 282/2025/ND-CP",
                doc1_desc: "Regulations on administrative penalties in the fields of security, order, and social safety.",
                doc2_title: "LAW ON ENTRY, EXIT, TRANSIT, AND RESIDENCE OF FOREIGNERS IN VIETNAM",
                doc2_desc: "Consolidated text regulating entry, exit, transit, and residence of foreigners.",
                doc3_title: "Regulation on coordination in managing foreigners residing and operating in Phu Tho province",
                doc3_desc: "Regulations on coordination in managing foreigners in Phu Tho province.",
                ai_section_title: "Legal AI Assistant",
                ai_section_desc: "Smart automated answering system helping you quickly look up immigration regulations. Accurate - Fast - Convenient.",
                chat_now: "Chat Now",
                ai_name: "AI Assistant",
                chat_demo_q: "What are the procedures for extending a tourist visa?",
                chat_demo_a: "According to the latest regulations, you need: Original passport, NA5 form, and temporary residence confirmation...",
                footer_slogan: "DEVOTED TO FATHERLAND - SERVING THE PEOPLE",
                designed_by_label: "Designed by Captain Vi Ngoc Phuong",
                designed_by_role: "Secretary of Joint Youth Union PA01-PA08",
                online_status: "Online",
                bubble_text: "Hello! I am AI Assistant, surely allow me to help you?",
                campaign_peak: "70-Day Peak Campaign",
                campaign_digital: "Pioneering Digital Transformation",
                campaign_peak: "70-Day Peak Campaign",
                campaign_digital: "Pioneering Digital Transformation",
                anniv_line1: "Youth Work Celebrating",
                anniv_line2: "95th Anniversary of Ho Chi Minh Communist Youth Union",
                anniv_line3: "70th Anniversary of MPS Youth Union Tradition",
                footer_action: "Phu Tho Police Youth: Shock - Achievement - For National Security",
                close_btn: "Close",
                view_details_btn: "View Details",
                stat_online: "Online",
                stat_today: "Today",
                stat_total: "Total Visits"
            },
            zh: {
                home: "首页",
                documents: "法律文件",
                ai_assistant: "AI 助手",
                language: "语言:",
                search_docs: "查询文件",
                ask_ai: "咨询 AI 助手",
                docs_title: "法律文件库",
                view_quick: "快速查看",
                open_file: "打开文件",
                motto_1: "纪律是基础",
                motto_2: "忠诚是核心",
                motto_3: "亲民是标准",
                unit_name_1: "富寿省公安厅",
                unit_name_2: "出入境管理处",
                hero_movement: "竞赛运动",
                hero_3best: "三个最",
                best_discipline: "纪律最严",
                best_loyalty: "最忠诚",
                best_closeness: "最亲民",
                tag_decree: "议定",
                tag_law: "法律",
                tag_regulation: "规制",
                doc1_title: "第 282/2025/NĐ-CP 号议定",
                doc1_desc: "规定安全、秩序和社会安全领域的行政违法处罚。",
                doc2_title: "关于外国人在越南入境、出境、过境、居留法",
                doc2_desc: "关于外国人在越南入境、出境、过境、居留规定的合并文本。",
                doc3_title: "富寿省外国人居留、活动管理协调规制",
                doc3_desc: "关于富寿省外国人管理协调的规定。",
                ai_section_title: "法律虚拟助手",
                ai_section_desc: "智能自动解答系统，帮助您快速查询出入境规定。准确 - 快速 - 便捷。",
                chat_now: "立即交谈",
                ai_name: "AI 助手",
                chat_demo_q: "旅游签证延期手续包括什么？",
                chat_demo_a: "根据最新规定，您需要准备：护照原件、NA5 申报表和暂住证明...",
                footer_slogan: "忘我为国 - 服务为民",
                designed_by_label: "设计者：韦玉方上尉",
                designed_by_role: "PA01-PA08 联合团支部书记",
                online_status: "在线",
                bubble_text: "你好！我是 AI 助手，有什么可以帮您吗？",
                campaign_peak: "70 天巅峰冲刺",
                campaign_digital: "数字化转型先锋",
                anniv_line1: "青年工程 庆祝",
                anniv_line2: "胡志明共青团成立 95 周年",
                anniv_line3: "公安部共青团传统 70 周年",
                footer_action: "富寿公安青年：突击 - 立功 - 为了祖国安全",
                close_btn: "关闭",
                view_details_btn: "查看详情",
                stat_online: "在线",
                stat_today: "今日",
                stat_total: "总访问量"
            }
        };

        let currentLang = 'vi';

        function setLanguage(lang) {
            currentLang = lang;

            // Update Text Content
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    el.innerText = translations[lang][key];
                }
            });

            // Update Buttons State
            const ids = ['lang-btn-vi', 'lang-btn-en', 'lang-btn-zh', 'mob-lang-vi', 'mob-lang-en', 'mob-lang-zh', 'mob-header-lang-vi', 'mob-header-lang-en', 'mob-header-lang-zh'];
            ids.forEach(id => {
                const el = document.getElementById(id);
                if (!el) return;

                // Check if this button matches current lang
                const isSelected = id.endsWith(lang);
                if (isSelected) {
                    el.classList.add('text-cand-gold', 'font-bold');
                    el.classList.remove('text-white/70');
                } else {
                    el.classList.remove('text-cand-gold', 'font-bold');
                    el.classList.add('text-white/70');
                }
            });

            // Special cases (updating docData titles if we wanted to go deep, but for now we keep doc content in VI mainly as it's legal docs)
            // But we can update the modal buttons if they were separate, but they are inside HTML string in docData. 
            // For a simple implementation, we assume doc content stays Vietnamese.
        }

        // ========== MOBILE MENU ==========
        const mobileMenu = document.getElementById('mobileMenu');
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');

        function toggleMobileMenu() {
            const isHidden = mobileMenu.classList.toggle('hidden');
            mobileMenuBtn.setAttribute('aria-expanded', !isHidden);
        }

        if (mobileMenuBtn) {
            mobileMenuBtn.addEventListener('click', toggleMobileMenu);
        }

        // ========== MODAL FUNCTIONALITY ==========
        const docData = {
            doc1: {
                pdfLink: "2025_1583_1584_282_2025_ND_CP.pdf",
                vi: {
                    title: "Nghị định 282/2025/NĐ-CP",
                    content: `
                    <div class="space-y-5 text-gray-800 font-inter">
                        <div class="bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-cand-red p-5 rounded-r-xl shadow-sm">
                             <h4 class="font-bold text-cand-red text-lg mb-2 flex items-center gap-2">
                                <i data-lucide="scale" class="w-5 h-5"></i>
                                Nghị định 282/2025/NĐ-CP
                            </h4>
                            <p class="text-sm leading-relaxed">Quy định chi tiết các hành vi vi phạm, mức xử phạt và thẩm quyền xử lý liên quan đến <strong>người nước ngoài (NNN)</strong> và các <strong>tổ chức nước ngoài</strong> tại Việt Nam.</p>
                        </div>

                        <!-- Section 1: Đối tượng & Hình thức -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-red-100 text-cand-red w-6 h-6 rounded-full flex items-center justify-center text-xs">1</span>
                                Đối tượng & Hình thức Xử phạt
                            </h5>
                            <div class="grid md:grid-cols-2 gap-3 text-sm">
                                <div class="bg-orange-50/50 p-3 rounded-lg border border-orange-100">
                                    <strong class="text-orange-700 block mb-1">Đối tượng áp dụng</strong>
                                    <span class="text-xs">Cá nhân NNN và tổ chức nước ngoài. <strong>Tổ chức vi phạm: Phạt gấp 02 lần</strong> cá nhân.</span>
                                </div>
                                <div class="bg-red-50/50 p-3 rounded-lg border border-red-100">
                                    <strong class="text-cand-red block mb-1">Hình thức đặc thù</strong>
                                    <span class="text-xs">Ngoài cảnh cáo, phạt tiền: Có thể áp dụng <strong>TRỤC XUẤT</strong> như hình thức chính hoặc bổ sung.</span>
                                </div>
                            </div>
                        </div>

                        <!-- Section 2: Vi phạm XNC (Điều 21) -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-red-100 text-cand-red w-6 h-6 rounded-full flex items-center justify-center text-xs">2</span>
                                Vi phạm Xuất nhập cảnh & Cư trú (Điều 21)
                            </h5>
                            <div class="space-y-3 text-sm">
                                <div class="flex items-start gap-2">
                                    <i data-lucide="id-card" class="w-4 h-4 text-orange-500 mt-0.5 shrink-0"></i>
                                    <div>
                                        <strong>Giấy tờ tùy thân:</strong> Không mang hộ chiếu khi đi lại: <strong class="text-cand-red">300K - 500K</strong>. Khai sai sự thật, vào khu vực cấm: <strong class="text-cand-red">500K - 2 Triệu</strong>.
                                    </div>
                                </div>
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <strong class="block mb-2 text-gray-900">Quá hạn tạm trú:</strong>
                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-xs">
                                        <div class="bg-white p-2 rounded border text-center">
                                            <span class="block text-gray-500">< 16 ngày</span>
                                            <strong class="text-cand-red">500K - 2Tr</strong>
                                        </div>
                                        <div class="bg-white p-2 rounded border text-center">
                                            <span class="block text-gray-500">16 - 30 ngày</span>
                                            <strong class="text-cand-red">5 - 10Tr</strong>
                                        </div>
                                        <div class="bg-white p-2 rounded border text-center">
                                            <span class="block text-gray-500">30 - 60 ngày</span>
                                            <strong class="text-cand-red">10 - 15Tr</strong>
                                        </div>
                                        <div class="bg-white p-2 rounded border text-center">
                                            <span class="block text-gray-500">60 - 90 ngày</span>
                                            <strong class="text-cand-red">15 - 20Tr</strong>
                                        </div>
                                        <div class="bg-white p-2 rounded border text-center">
                                            <span class="block text-gray-500">90 - 180 ngày</span>
                                            <strong class="text-cand-red">20 - 25Tr</strong>
                                        </div>
                                        <div class="bg-white p-2 rounded border text-center">
                                            <span class="block text-gray-500">180 ngày - 1 năm</span>
                                            <strong class="text-cand-red">25 - 30Tr</strong>
                                        </div>
                                        <div class="bg-red-100 p-2 rounded border border-red-200 text-center col-span-2">
                                            <span class="block text-red-700 font-bold">≥ 01 năm</span>
                                            <strong class="text-cand-red text-sm">30 - 40 Triệu</strong>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex items-start gap-2">
                                    <i data-lucide="briefcase" class="w-4 h-4 text-blue-500 mt-0.5 shrink-0"></i>
                                    <div>
                                        <strong>Hoạt động sai mục đích:</strong> Hành nghề không phép: <strong class="text-cand-red">15 - 20Tr</strong>. Sai mục đích xin visa: <strong class="text-cand-red">20 - 25Tr</strong>.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Section 3: Trách nhiệm tổ chức -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-red-100 text-cand-red w-6 h-6 rounded-full flex items-center justify-center text-xs">3</span>
                                Trách nhiệm Tổ chức mời/bảo lãnh & Cơ sở lưu trú
                            </h5>
                            <div class="grid md:grid-cols-2 gap-3 text-xs">
                                <div class="bg-purple-50/50 p-3 rounded-lg border border-purple-100">
                                    <strong class="text-purple-700 block mb-1">Tổ chức mời, bảo lãnh</strong>
                                    <span>Không thực hiện đúng trách nhiệm hoặc sử dụng NNN cư trú bất hợp pháp: <strong class="text-cand-red">20 - 25 Triệu</strong>.</span>
                                </div>
                                <div class="bg-blue-50/50 p-3 rounded-lg border border-blue-100">
                                    <strong class="text-blue-700 block mb-1">Cơ sở lưu trú</strong>
                                    <span>Không khai báo tạm trú: <strong class="text-cand-red">3 - 20 Triệu</strong> (tùy số lượng NNN từ 01 đến 09+ người).</span>
                                </div>
                                <div class="bg-gray-50 p-3 rounded-lg border border-gray-200 md:col-span-2">
                                    <strong class="text-gray-700 block mb-1">Kinh doanh bảo vệ</strong>
                                    <span>Sử dụng NNN làm nhân viên bảo vệ/an ninh: <strong class="text-cand-red">5 - 10 Triệu</strong>.</span>
                                </div>
                            </div>
                        </div>

                        <!-- Section 4: Hành vi bị trục xuất -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-red-100 text-cand-red w-6 h-6 rounded-full flex items-center justify-center text-xs">4</span>
                                Hành vi bị Trục xuất
                            </h5>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-xs">
                                <div class="bg-red-50 p-2 rounded-lg text-center border border-red-100">
                                    <i data-lucide="alert-triangle" class="w-4 h-4 text-red-500 mx-auto mb-1"></i>
                                    <span class="block">Xâm phạm trật tự công cộng</span>
                                </div>
                                <div class="bg-red-50 p-2 rounded-lg text-center border border-red-100">
                                    <i data-lucide="bomb" class="w-4 h-4 text-red-500 mx-auto mb-1"></i>
                                    <span class="block">Vi phạm vũ khí, pháo</span>
                                </div>
                                <div class="bg-red-50 p-2 rounded-lg text-center border border-red-100">
                                    <i data-lucide="ban" class="w-4 h-4 text-red-500 mx-auto mb-1"></i>
                                    <span class="block">Tệ nạn xã hội (ma túy, mại dâm)</span>
                                </div>
                                <div class="bg-red-50 p-2 rounded-lg text-center border border-red-100">
                                    <i data-lucide="shield-alert" class="w-4 h-4 text-red-500 mx-auto mb-1"></i>
                                    <span class="block">Xâm phạm an ninh quốc gia</span>
                                </div>
                            </div>
                        </div>

                        <!-- Section 5: Thẩm quyền -->
                        <div class="bg-red-50/50 p-4 rounded-xl border border-red-100">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base">
                                <span class="bg-cand-red text-white w-6 h-6 rounded-full flex items-center justify-center text-xs">5</span>
                                Thẩm quyền Xử phạt & Trục xuất
                            </h5>
                             <ul class="text-sm space-y-2 ml-1">
                                <li class="flex gap-2">
                                    <i data-lucide="user" class="w-4 h-4 text-cand-red mt-0.5"></i>
                                    <span><strong>Trưởng phòng QL XNC</strong> & <strong>Giám đốc CA tỉnh:</strong> Phạt tiền + quyền quyết định <strong>TRỤC XUẤT</strong>.</span>
                                </li>
                                <li class="flex gap-2">
                                    <i data-lucide="building-2" class="w-4 h-4 text-cand-red mt-0.5"></i>
                                    <span><strong>Cục trưởng Cục QL XNC:</strong> Thẩm quyền cao nhất, quyền quyết định trục xuất.</span>
                                </li>
                                <li class="flex gap-2 bg-yellow-50 p-2 rounded-lg border border-yellow-200 mt-2">
                                    <i data-lucide="info" class="w-4 h-4 text-yellow-600 mt-0.5 shrink-0"></i>
                                    <span class="text-xs"><strong>Lưu ý:</strong> Nếu NNN không có khả năng tài chính nộp phạt nhưng cần đảm bảo an ninh quốc gia, có thể thi hành ngay hình thức <strong>TRỤC XUẤT</strong>.</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    `
                },
                en: {
                    title: "Decree 282/2025/ND-CP",
                    content: `
                    <div class="space-y-5 text-gray-800 font-inter">
                        <div class="bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-cand-red p-5 rounded-r-xl shadow-sm">
                                <h4 class="font-bold text-cand-red text-lg mb-2 flex items-center gap-2">
                                <i data-lucide="scale" class="w-5 h-5"></i>
                                Decree 282/2025/ND-CP
                            </h4>
                            <p class="text-sm leading-relaxed">Detailed regulations on violations, penalties, and authority regarding <strong>foreigners (NNN)</strong> and <strong>foreign organizations</strong> in Vietnam.</p>
                        </div>

                        <!-- Section 1 -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-red-100 text-cand-red w-6 h-6 rounded-full flex items-center justify-center text-xs">1</span>
                                Subjects & Penalties
                            </h5>
                            <div class="grid md:grid-cols-2 gap-3 text-sm">
                                <div class="bg-orange-50/50 p-3 rounded-lg border border-orange-100">
                                    <strong class="text-orange-700 block mb-1">Applicable Subjects</strong>
                                    <span class="text-xs">Foreign individuals and organizations. <strong>Organizations: Fined 2x</strong> individuals.</span>
                                </div>
                                <div class="bg-red-50/50 p-3 rounded-lg border border-red-100">
                                    <strong class="text-cand-red block mb-1">Special Penalty</strong>
                                    <span class="text-xs">Besides warnings/fines: <strong>EXPULSION</strong> may be applied as main or additional penalty.</span>
                                </div>
                            </div>
                        </div>

                        <!-- Section 2 -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-red-100 text-cand-red w-6 h-6 rounded-full flex items-center justify-center text-xs">2</span>
                                Immigration & Residence Violations (Art. 21)
                            </h5>
                            <div class="space-y-3 text-sm">
                                <div class="flex items-start gap-2">
                                    <i data-lucide="id-card" class="w-4 h-4 text-orange-500 mt-0.5 shrink-0"></i>
                                    <div>
                                        <strong>Identity Papers:</strong> No passport when traveling: <strong class="text-cand-red">300K - 500K</strong>. False declaration/Restricted area: <strong class="text-cand-red">500K - 2M</strong>.
                                    </div>
                                </div>
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <strong class="block mb-2 text-gray-900">Overstaying Temporary Residence:</strong>
                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-xs">
                                        <div class="bg-white p-2 rounded border text-center">
                                            <span class="block text-gray-500">< 16 days</span>
                                            <strong class="text-cand-red">500K - 2M</strong>
                                        </div>
                                        <div class="bg-white p-2 rounded border text-center">
                                            <span class="block text-gray-500">16 - 30 days</span>
                                            <strong class="text-cand-red">5 - 10M</strong>
                                        </div>
                                        <div class="bg-white p-2 rounded border text-center">
                                            <span class="block text-gray-500">30 - 60 days</span>
                                            <strong class="text-cand-red">10 - 15M</strong>
                                        </div>
                                        <div class="bg-white p-2 rounded border text-center">
                                            <span class="block text-gray-500">60 - 90 days</span>
                                            <strong class="text-cand-red">15 - 20M</strong>
                                        </div>
                                        <div class="bg-white p-2 rounded border text-center">
                                            <span class="block text-gray-500">90 - 180 days</span>
                                            <strong class="text-cand-red">20 - 25M</strong>
                                        </div>
                                        <div class="bg-white p-2 rounded border text-center">
                                            <span class="block text-gray-500">180 days - 1 yr</span>
                                            <strong class="text-cand-red">25 - 30M</strong>
                                        </div>
                                        <div class="bg-red-100 p-2 rounded border border-red-200 text-center col-span-2">
                                            <span class="block text-red-700 font-bold">≥ 01 year</span>
                                            <strong class="text-cand-red text-sm">30 - 40 Million</strong>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex items-start gap-2">
                                    <i data-lucide="briefcase" class="w-4 h-4 text-blue-500 mt-0.5 shrink-0"></i>
                                    <div>
                                        <strong>Wrong Purpose:</strong> Unlicensed practice: <strong class="text-cand-red">15 - 20M</strong>. Wrong visa purpose: <strong class="text-cand-red">20 - 25M</strong>.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Section 3 -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-red-100 text-cand-red w-6 h-6 rounded-full flex items-center justify-center text-xs">3</span>
                                Organization & Accommodation Responsibilities
                            </h5>
                            <div class="grid md:grid-cols-2 gap-3 text-xs">
                                <div class="bg-purple-50/50 p-3 rounded-lg border border-purple-100">
                                    <strong class="text-purple-700 block mb-1">Sponsors</strong>
                                    <span>Fail responsibility or use illegal residents: <strong class="text-cand-red">20 - 25 Million</strong>.</span>
                                </div>
                                <div class="bg-blue-50/50 p-3 rounded-lg border border-blue-100">
                                    <strong class="text-blue-700 block mb-1">Accommodations</strong>
                                    <span>Fail to declare stay: <strong class="text-cand-red">3 - 20 Million</strong> (depends on 01 to 09+ people).</span>
                                </div>
                                <div class="bg-gray-50 p-3 rounded-lg border border-gray-200 md:col-span-2">
                                    <strong class="text-gray-700 block mb-1">Security Business</strong>
                                    <span>Using foreigners as security staff: <strong class="text-cand-red">5 - 10 Million</strong>.</span>
                                </div>
                            </div>
                        </div>

                        <!-- Section 4 -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-red-100 text-cand-red w-6 h-6 rounded-full flex items-center justify-center text-xs">4</span>
                                Acts Leading to Expulsion
                            </h5>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-xs">
                                <div class="bg-red-50 p-2 rounded-lg text-center border border-red-100">
                                    <i data-lucide="alert-triangle" class="w-4 h-4 text-red-500 mx-auto mb-1"></i>
                                    <span class="block">Public Disorder</span>
                                </div>
                                <div class="bg-red-50 p-2 rounded-lg text-center border border-red-100">
                                    <i data-lucide="bomb" class="w-4 h-4 text-red-500 mx-auto mb-1"></i>
                                    <span class="block">Weapons/Fireworks</span>
                                </div>
                                <div class="bg-red-50 p-2 rounded-lg text-center border border-red-100">
                                    <i data-lucide="ban" class="w-4 h-4 text-red-500 mx-auto mb-1"></i>
                                    <span class="block">Social Evils (Drugs etc)</span>
                                </div>
                                <div class="bg-red-50 p-2 rounded-lg text-center border border-red-100">
                                    <i data-lucide="shield-alert" class="w-4 h-4 text-red-500 mx-auto mb-1"></i>
                                    <span class="block">National Security</span>
                                </div>
                            </div>
                        </div>

                        <!-- Section 5 -->
                        <div class="bg-red-50/50 p-4 rounded-xl border border-red-100">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base">
                                <span class="bg-cand-red text-white w-6 h-6 rounded-full flex items-center justify-center text-xs">5</span>
                                Authority
                            </h5>
                                <ul class="text-sm space-y-2 ml-1">
                                <li class="flex gap-2">
                                    <i data-lucide="user" class="w-4 h-4 text-cand-red mt-0.5"></i>
                                    <span><strong>IMM Head</strong> & <strong>Provincial Police Director:</strong> Fine + <strong>EXPULSION</strong> decision.</span>
                                </li>
                                <li class="flex gap-2">
                                    <i data-lucide="building-2" class="w-4 h-4 text-cand-red mt-0.5"></i>
                                    <span><strong>Director of Immigration Dept:</strong> Highest authority, expulsion decision.</span>
                                </li>
                                <li class="flex gap-2 bg-yellow-50 p-2 rounded-lg border border-yellow-200 mt-2">
                                    <i data-lucide="info" class="w-4 h-4 text-yellow-600 mt-0.5 shrink-0"></i>
                                    <span class="text-xs"><strong>Note:</strong> Immediate <strong>EXPULSION</strong> can be enforced if security requires, even if unable to pay fines.</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    `
                },
                zh: {
                    title: "第 282/2025/NĐ-CP 号议定",
                    subtitle: "关于行政处罚的规定",
                    content: `
                    <div class="space-y-6 text-gray-800 font-inter">
                        <div class="bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-cand-red p-5 rounded-r-xl shadow-sm">
                             <h4 class="font-bold text-cand-red-dark text-lg mb-2 flex items-center gap-2">
                                <i data-lucide="alert-octagon" class="w-5 h-5"></i>
                                第 282/2025/NĐ-CP 号议定
                            </h4>
                            <p class="text-sm leading-relaxed">规定安全、秩序和社会安全领域的行政违法处罚。对违反出入境、居留登记规定的外国人特别重要。</p>
                        </div>
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-cand-red text-white w-6 h-6 rounded-full flex items-center justify-center text-xs">1</span>
                                罚款与处罚
                            </h5>
                             <ul class="text-sm space-y-2 ml-1">
                                <li class="flex gap-2">
                                    <i data-lucide="gavel" class="w-4 h-4 text-cand-red mt-0.5"></i>
                                    <span><strong>罚款：</strong> 最高可达 <strong>40,000,000 越南盾</strong>。</span>
                                </li>
                                <li class="flex gap-2">
                                    <i data-lucide="ban" class="w-4 h-4 text-cand-red mt-0.5"></i>
                                    <span><strong>附加处罚：</strong> 对于严重违规行为，可能被<strong>没收证件</strong>或<strong>驱逐出境</strong>。</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    `
                }
            },
            doc2: {
                pdfLink: "2023_1257_1258_30_VBHN_VPQH.pdf",
                vi: {
                    title: "LUẬT NHẬP CẢNH, XUẤT CẢNH, QUÁ CẢNH, CƯ TRÚ CỦA NGƯỜI NƯỚC NGOÀI TẠI VIỆT NAM",
                    subtitle: "Văn bản hợp nhất số 30/VBHN-VPQH",
                    content: `
                    <div class="space-y-6 text-gray-800 font-inter">
                        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 p-5 rounded-r-xl shadow-sm">
                             <h4 class="font-bold text-blue-700 text-lg mb-2 flex items-center gap-2">
                                <i data-lucide="book-open" class="w-5 h-5"></i>
                                Văn bản hợp nhất số 30/VBHN-VPQH năm 2023
                            </h4>
                            <p class="text-sm leading-relaxed">Đây là văn bản pháp lý quan trọng quy định toàn diện về hoạt động của người nước ngoài tại Việt Nam, bao gồm nguyên tắc, điều kiện, trình tự, thủ tục nhập cảnh, xuất cảnh, quá cảnh và cư trú.</p>
                        </div>

                        <!-- Section 1 -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-blue-100 text-blue-600 w-6 h-6 rounded-full flex items-center justify-center text-xs">1</span>
                                Phạm vi và Nguyên tắc Chung
                            </h5>
                            <ul class="space-y-3 text-sm ml-2">
                                <li class="flex items-start gap-2">
                                    <i data-lucide="check-circle-2" class="w-4 h-4 text-green-500 mt-0.5 shrink-0"></i>
                                    <span><strong>Phạm vi:</strong> Quy định về nguyên tắc, điều kiện, thủ tục, quyền và nghĩa vụ của người nước ngoài.</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i data-lucide="shield" class="w-4 h-4 text-blue-500 mt-0.5 shrink-0"></i>
                                    <span><strong>Nguyên tắc:</strong> Đảm bảo chủ quyền, an ninh quốc gia. Quản lý <strong>công khai, minh bạch, thuận lợi</strong> nhưng chặt chẽ.</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i data-lucide="alert-triangle" class="w-4 h-4 text-red-500 mt-0.5 shrink-0"></i>
                                    <span><strong>Nghiêm cấm:</strong> Nhập cảnh trái phép, làm giả giấy tờ, khai sai sự thật, chống phá Nhà nước.</span>
                                </li>
                            </ul>
                        </div>

                        <!-- Section 2 -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-blue-100 text-blue-600 w-6 h-6 rounded-full flex items-center justify-center text-xs">2</span>
                                Quy định về Thị thực (Visa)
                            </h5>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3">
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <span class="block font-bold text-blue-600 text-xs mb-1">DL (Du lịch)</span>
                                    <span class="text-sm">Không quá 90 ngày</span>
                                </div>
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <span class="block font-bold text-blue-600 text-xs mb-1">LĐ1, LĐ2 (Lao động)</span>
                                    <span class="text-sm">Không quá 02 năm</span>
                                </div>
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <span class="block font-bold text-blue-600 text-xs mb-1">ĐT1 - ĐT4 (Đầu tư)</span>
                                    <span class="text-sm">01 - 05 năm (tùy vốn)</span>
                                </div>
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <span class="block font-bold text-blue-600 text-xs mb-1">TT (Thăm thân)</span>
                                    <span class="text-sm">Không quá 01 năm</span>
                                </div>
                            </div>
                            <p class="text-sm text-gray-600 italic border-l-2 border-gray-300 pl-3">
                                *Thường không được chuyển đổi mục đích, trừ trường hợp có giấy tờ chứng minh đầu tư, lao động hoặc quan hệ nhân thân.
                            </p>
                        </div>

                        <!-- Section 3 & 4 Grid -->
                        <div class="grid md:grid-cols-2 gap-4">
                            <!-- Section 3 -->
                            <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                                <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-sm border-b pb-2 border-gray-100">
                                    <span class="bg-blue-100 text-blue-600 w-6 h-6 rounded-full flex items-center justify-center text-xs">3</span>
                                    Xuất Nhập Cảnh
                                </h5>
                                <ul class="space-y-2 text-sm">
                                    <li><strong>Điều kiện:</strong> Hộ chiếu còn hạn & Thị thực.</li>
                                    <li><strong>Miễn thị thực:</strong> Đơn phương miễn thị thực tạm trú <strong>45 ngày</strong>.</li>
                                    <li><strong>Tạm hoãn XC:</strong> Liên quan vụ án, nợ thuế, chưa chấp hành phạt HC.</li>
                                </ul>
                            </div>
                            
                            <!-- Section 4 -->
                            <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                                <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-sm border-b pb-2 border-gray-100">
                                    <span class="bg-blue-100 text-blue-600 w-6 h-6 rounded-full flex items-center justify-center text-xs">4</span>
                                    Cư trú
                                </h5>
                                <ul class="space-y-2 text-sm">
                                    <li><strong>Tạm trú:</strong> Khai báo điện tử hoặc phiếu tại CA xã/phường.</li>
                                    <li><strong>Thẻ tạm trú:</strong> 02 - 10 năm (ĐT, LĐ, TT).</li>
                                    <li><strong>Thường trú:</strong> Người có công, chuyên gia, hoặc được bảo lãnh.</li>
                                </ul>
                            </div>
                        </div>

                         <!-- Section 5 -->
                        <div class="bg-blue-50/50 p-4 rounded-xl border border-blue-100">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base">
                                <span class="bg-blue-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs">5</span>
                                Quyền & Trách nhiệm
                            </h5>
                             <ul class="text-sm space-y-2 ml-1">
                                <li class="flex gap-2">
                                    <i data-lucide="user-check" class="w-4 h-4 text-blue-600 mt-0.5"></i>
                                    <span><strong>Quyền lợi:</strong> Bảo hộ tính mạng, tài sản. Được bảo lãnh người thân.</span>
                                </li>
                                <li class="flex gap-2">
                                    <i data-lucide="gavel" class="w-4 h-4 text-cand-red mt-0.5"></i>
                                    <span><strong>Nghĩa vụ:</strong> Tuân thủ pháp luật, hoạt động đúng mục đích, mang giấy tờ tùy thân.</span>
                                </li>
                                <li class="flex gap-2">
                                    <i data-lucide="building-2" class="w-4 h-4 text-gray-600 mt-0.5"></i>
                                    <span><strong>Quản lý:</strong> Bộ Công an (chủ trì), Bộ Ngoại giao (ngoại giao), UBND các cấp (địa phương).</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    `
                },
                en: {
                    title: "LAW ON ENTRY, EXIT, TRANSIT, AND RESIDENCE OF FOREIGNERS IN VIETNAM",
                    subtitle: "Consolidated Document No. 30/VBHN-VPQH",
                    content: `
                    <div class="space-y-6 text-gray-800 font-inter">
                        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 p-5 rounded-r-xl shadow-sm">
                                <h4 class="font-bold text-blue-700 text-lg mb-2 flex items-center gap-2">
                                <i data-lucide="book-open" class="w-5 h-5"></i>
                                Consolidated Document No. 30/VBHN-VPQH 2023
                            </h4>
                            <p class="text-sm leading-relaxed">Important legal document comprehensively regulating activities of foreigners in Vietnam: principles, conditions, procedures for entry, exit, transit, and residence.</p>
                        </div>

                        <!-- Section 1 -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-blue-100 text-blue-600 w-6 h-6 rounded-full flex items-center justify-center text-xs">1</span>
                                Scope & Principles
                            </h5>
                            <ul class="space-y-3 text-sm ml-2">
                                <li class="flex items-start gap-2">
                                    <i data-lucide="check-circle-2" class="w-4 h-4 text-green-500 mt-0.5 shrink-0"></i>
                                    <span><strong>Scope:</strong> Regulations on principles, conditions, procedures, rights, and obligations of foreigners.</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i data-lucide="shield" class="w-4 h-4 text-blue-500 mt-0.5 shrink-0"></i>
                                    <span><strong>Principles:</strong> Ensure sovereignty, national security. Management must be <strong>open, transparent, favorable</strong> yet strict.</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i data-lucide="alert-triangle" class="w-4 h-4 text-red-500 mt-0.5 shrink-0"></i>
                                    <span><strong>Prohibited:</strong> Illegal entry, forged papers, false declaration, anti-state activities.</span>
                                </li>
                            </ul>
                        </div>

                        <!-- Section 2 -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-blue-100 text-blue-600 w-6 h-6 rounded-full flex items-center justify-center text-xs">2</span>
                                Visa Regulations
                            </h5>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3">
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <span class="block font-bold text-blue-600 text-xs mb-1">DL (Tourist)</span>
                                    <span class="text-sm">Up to 90 days</span>
                                </div>
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <span class="block font-bold text-blue-600 text-xs mb-1">LD1, LD2 (Labor)</span>
                                    <span class="text-sm">Up to 02 years</span>
                                </div>
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <span class="block font-bold text-blue-600 text-xs mb-1">DT1 - DT4 (Investor)</span>
                                    <span class="text-sm">01 - 05 years</span>
                                </div>
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <span class="block font-bold text-blue-600 text-xs mb-1">TT (Dependent)</span>
                                    <span class="text-sm">Up to 01 year</span>
                                </div>
                            </div>
                            <p class="text-sm text-gray-600 italic border-l-2 border-gray-300 pl-3">
                                *Purpose usually cannot be changed, unless proved Investor, Labor, or Family relations.
                            </p>
                        </div>

                        <!-- Section 3 & 4 Grid -->
                        <div class="grid md:grid-cols-2 gap-4">
                            <!-- Section 3 -->
                            <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                                <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-sm border-b pb-2 border-gray-100">
                                    <span class="bg-blue-100 text-blue-600 w-6 h-6 rounded-full flex items-center justify-center text-xs">3</span>
                                    Entry / Exit
                                </h5>
                                <ul class="space-y-2 text-sm">
                                    <li><strong>Conditions:</strong> Valid passport & Visa.</li>
                                    <li><strong>Visa Exemption:</strong> Unilateral exemption stay <strong>45 days</strong>.</li>
                                    <li><strong>Exit Suspension:</strong> Case involvement, tax debt, penalty enforcement.</li>
                                </ul>
                            </div>
                            
                            <!-- Section 4 -->
                            <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                                <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-sm border-b pb-2 border-gray-100">
                                    <span class="bg-blue-100 text-blue-600 w-6 h-6 rounded-full flex items-center justify-center text-xs">4</span>
                                    Residence
                                </h5>
                                <ul class="space-y-2 text-sm">
                                    <li><strong>Temporary:</strong> Report via electronic portal or at Commune Police.</li>
                                    <li><strong>Residence Card:</strong> 02 - 10 years (Inv, Labor, Dep).</li>
                                    <li><strong>Permanent:</strong> Meritorious, Experts, or Guaranteed.</li>
                                </ul>
                            </div>
                        </div>

                            <!-- Section 5 -->
                        <div class="bg-blue-50/50 p-4 rounded-xl border border-blue-100">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base">
                                <span class="bg-blue-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs">5</span>
                                Rights & Obligations
                            </h5>
                                <ul class="text-sm space-y-2 ml-1">
                                <li class="flex gap-2">
                                    <i data-lucide="user-check" class="w-4 h-4 text-blue-600 mt-0.5"></i>
                                    <span><strong>Rights:</strong> Protected life, property. Guarantee relatives.</span>
                                </li>
                                <li class="flex gap-2">
                                    <i data-lucide="gavel" class="w-4 h-4 text-cand-red mt-0.5"></i>
                                    <span><strong>Obligations:</strong> Obey laws, proper purpose, carry ID papers.</span>
                                </li>
                                <li class="flex gap-2">
                                    <i data-lucide="building-2" class="w-4 h-4 text-gray-600 mt-0.5"></i>
                                    <span><strong>Management:</strong> MPS (Lead), MFA (Diplomatic), People's Committees (Local).</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    `
                },
                zh: {
                    title: "关于外国人在越南入境、出境、过境、居留法",
                    subtitle: "第 30/VBHN-VPQH 号合并文本",
                    content: `
                    <div class="space-y-6 text-gray-800 font-inter">
                        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 p-5 rounded-r-xl shadow-sm">
                                <h4 class="font-bold text-blue-700 text-lg mb-2 flex items-center gap-2">
                                <i data-lucide="book-open" class="w-5 h-5"></i>
                                第 30/VBHN-VPQH 号合并文本
                            </h4>
                            <p class="text-sm leading-relaxed">关于外国人在越南活动的全面法律规定：入境、出境、过境和居留的原则、条件和程序。</p>
                        </div>
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-blue-100 text-blue-600 w-6 h-6 rounded-full flex items-center justify-center text-xs">1</span>
                                范围与原则
                            </h5>
                            <ul class="space-y-3 text-sm ml-2">
                                 <li class="flex items-start gap-2">
                                    <i data-lucide="check-circle-2" class="w-4 h-4 text-green-500 mt-0.5 shrink-0"></i>
                                    <span><strong>范围：</strong> 关于外国人权利义务的规定。</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i data-lucide="shield" class="w-4 h-4 text-blue-500 mt-0.5 shrink-0"></i>
                                    <span><strong>原则：</strong> 确保主权、安全。管理<strong>公开、透明、便利</strong>。</span>
                                </li>
                            </ul>
                        </div>
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-blue-100 text-blue-600 w-6 h-6 rounded-full flex items-center justify-center text-xs">2</span>
                                签证规定 (Visa)
                            </h5>
                             <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3">
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <span class="block font-bold text-blue-600 text-xs mb-1">DL (旅游)</span>
                                    <span class="text-sm">不超过 90 天</span>
                                </div>
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <span class="block font-bold text-blue-600 text-xs mb-1">DT1 - DT4 (投资)</span>
                                    <span class="text-sm">01 - 05 年</span>
                                </div>
                            </div>
                         </div>
                    </div>
                    `
                }
            },
            doc3: {
                pdfLink: "Quy_che_phoi_hop_quan_ly_NNN_Phu_Tho.pdf",
                vi: {
                    title: "Quy chế phối hợp trong quản lý người nước ngoài cư trú, hoạt động trên địa bàn tỉnh Phú Thọ",
                    subtitle: "Quyết định 2262/QĐ-UBND",
                    content: `
                    <div class="space-y-6 text-gray-800 font-inter">
                        <div class="bg-gradient-to-r from-teal-50 to-emerald-50 border-l-4 border-teal-500 p-5 rounded-r-xl shadow-sm">
                             <h4 class="font-bold text-teal-700 text-lg mb-2 flex items-center gap-2">
                                <i data-lucide="landmark" class="w-5 h-5"></i>
                                Quyết định 3518/2025/QĐ-CTUBND
                            </h4>
                            <p class="text-sm leading-relaxed">Quy chế phối hợp quản lý NNN tại Phú Thọ, hiệu lực từ <strong>28/10/2025</strong>, thay thế các quy định năm 2021 và 2024. Thiết lập lưới quản lý đa tầng với Công an tỉnh giữ vai trò "xương sống".</p>
                        </div>

                        <!-- Section 1: Cơ quan chủ trì -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-teal-100 text-teal-600 w-6 h-6 rounded-full flex items-center justify-center text-xs">1</span>
                                Cơ quan Chủ trì
                            </h5>
                            <div class="grid grid-cols-1 gap-2 text-sm">
                                <div class="flex items-center gap-3 bg-gray-50 p-3 rounded-lg">
                                    <i data-lucide="shield-check" class="w-5 h-5 text-teal-600 shrink-0"></i>
                                    <div>
                                        <strong class="text-teal-700">Công an tỉnh:</strong>
                                        <span class="text-gray-600">Chủ trì quản lý nhà nước về XNC, cư trú NNN.</span>
                                    </div>
                                </div>
                                <div class="flex items-center gap-3 bg-gray-50 p-3 rounded-lg">
                                    <i data-lucide="briefcase" class="w-5 h-5 text-blue-600 shrink-0"></i>
                                    <div>
                                        <strong class="text-blue-700">Sở Nội vụ:</strong>
                                        <span class="text-gray-600">Chủ trì quản lý lao động nước ngoài.</span>
                                    </div>
                                </div>
                                <div class="flex items-center gap-3 bg-gray-50 p-3 rounded-lg">
                                    <i data-lucide="globe" class="w-5 h-5 text-purple-600 shrink-0"></i>
                                    <div>
                                        <strong class="text-purple-700">Sở Ngoại vụ:</strong>
                                        <span class="text-gray-600">Quản lý đoàn khách theo lời mời lãnh đạo tỉnh, công tác lãnh sự.</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Section 2: Sở chuyên ngành -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-teal-100 text-teal-600 w-6 h-6 rounded-full flex items-center justify-center text-xs">2</span>
                                Trách nhiệm Sở Chuyên ngành
                            </h5>
                            <div class="grid md:grid-cols-2 gap-3 text-xs">
                                <div class="bg-blue-50/50 p-3 rounded-lg border border-blue-100">
                                    <strong class="text-blue-700 block mb-1">Sở GD&ĐT</strong>
                                    <span>Quản lý NNN tại cơ sở giáo dục. Phối hợp CA tỉnh khi mời giáo viên NNN.</span>
                                </div>
                                <div class="bg-pink-50/50 p-3 rounded-lg border border-pink-100">
                                    <strong class="text-pink-700 block mb-1">Sở Y tế</strong>
                                    <span>Báo cáo CA tỉnh việc cấp chứng chỉ hành nghề <strong>trước ngày 15 hàng tháng</strong>.</span>
                                </div>
                                <div class="bg-orange-50/50 p-3 rounded-lg border border-orange-100">
                                    <strong class="text-orange-700 block mb-1">Sở Công Thương</strong>
                                    <span>Quản lý VP đại diện thương nhân. Báo cáo <strong>trước 07 ngày</strong> khi NNN đến.</span>
                                </div>
                                <div class="bg-cyan-50/50 p-3 rounded-lg border border-cyan-100">
                                    <strong class="text-cyan-700 block mb-1">Ban QL KCN</strong>
                                    <span>Rà soát cư trú, quy hoạch lưu trú KCN, xử lý đình công liên quan NNN.</span>
                                </div>
                            </div>
                        </div>

                        <!-- Section 3 & 4 Grid -->
                        <div class="grid md:grid-cols-2 gap-4">
                            <!-- Section 3: Tình huống đặc biệt -->
                            <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                                <h5 class="font-bold text-gray-900 mb-2 text-sm border-b pb-2 border-gray-100 flex items-center gap-2">
                                    <span class="bg-red-100 text-red-600 w-5 h-5 rounded-full flex items-center justify-center text-xs">!</span>
                                    Tình huống Đặc biệt
                                </h5>
                                <ul class="space-y-2 text-xs">
                                    <li class="flex gap-2">
                                        <i data-lucide="alert-triangle" class="w-3 h-3 text-red-500 mt-0.5 shrink-0"></i>
                                        <span><strong>Tai nạn/Tử vong:</strong> Báo Bộ Ngoại giao trong <strong>12 giờ</strong>.</span>
                                    </li>
                                    <li class="flex gap-2">
                                        <i data-lucide="shield" class="w-3 h-3 text-purple-500 mt-0.5 shrink-0"></i>
                                        <span><strong>NNN ưu đãi vi phạm:</strong> Sở Ngoại vụ chủ trì xử lý ngoại giao.</span>
                                    </li>
                                    <li class="flex gap-2">
                                        <i data-lucide="log-out" class="w-3 h-3 text-cand-red mt-0.5 shrink-0"></i>
                                        <span><strong>Trục xuất:</strong> Công an tỉnh chủ trì thực hiện.</span>
                                    </li>
                                </ul>
                            </div>
                            
                            <!-- Section 4: Báo cáo -->
                            <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                                <h5 class="font-bold text-gray-900 mb-2 text-sm border-b pb-2 border-gray-100 flex items-center gap-2">
                                    <i data-lucide="calendar-check" class="w-4 h-4 text-teal-600"></i>
                                    Cơ chế Báo cáo
                                </h5>
                                <ul class="space-y-2 text-xs">
                                    <li>• <strong>Hàng tháng:</strong> Trước ngày 15 → Công an tỉnh.</li>
                                    <li>• <strong>6 tháng:</strong> Trước 15/6 → Phòng Quản lý XNC.</li>
                                    <li>• <strong>Năm:</strong> Trước 15/12 → Phòng Quản lý XNC.</li>
                                    <li>• <strong>Khai báo tạm trú:</strong> Qua trang điện tử Bộ Công an.</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Section 5: Trách nhiệm bảo lãnh -->
                        <div class="bg-teal-50/50 p-4 rounded-xl border border-teal-100">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base">
                                <span class="bg-teal-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs">5</span>
                                Trách nhiệm Cơ sở Mời/Bảo lãnh
                            </h5>
                             <ul class="text-sm space-y-2 ml-1">
                                <li class="flex gap-2">
                                    <i data-lucide="megaphone" class="w-4 h-4 text-teal-600 mt-0.5"></i>
                                    <span>Phối hợp tuyên truyền pháp luật Việt Nam cho NNN, phòng ngừa vi phạm.</span>
                                </li>
                                <li class="flex gap-2">
                                    <i data-lucide="handshake" class="w-4 h-4 text-teal-600 mt-0.5"></i>
                                    <span>Phối hợp giải quyết các vụ việc phát sinh liên quan đến người mình bảo lãnh.</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    `
                },
                en: {
                    title: "Coordination Regulation on Management of Foreigners in Phu Tho Province",
                    subtitle: "Decision 2262/QD-UBND",
                    content: `
                    <div class="space-y-6 text-gray-800 font-inter">
                        <div class="bg-gradient-to-r from-teal-50 to-emerald-50 border-l-4 border-teal-500 p-5 rounded-r-xl shadow-sm">
                                <h4 class="font-bold text-teal-700 text-lg mb-2 flex items-center gap-2">
                                <i data-lucide="landmark" class="w-5 h-5"></i>
                                Decision 3518/2025/QD-CTUBND
                            </h4>
                            <p class="text-sm leading-relaxed">Regulation on coordination in managing Foreigners in Phu Tho, effective from <strong>Oct 28, 2025</strong>, replacing 2021 & 2024 regulations. Establishes multi-layer management grid with Provincial Police as "backbone".</p>
                        </div>

                        <!-- Section 1 -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-teal-100 text-teal-600 w-6 h-6 rounded-full flex items-center justify-center text-xs">1</span>
                                Leading Agencies
                            </h5>
                            <div class="grid grid-cols-1 gap-2 text-sm">
                                <div class="flex items-center gap-3 bg-gray-50 p-3 rounded-lg">
                                    <i data-lucide="shield-check" class="w-5 h-5 text-teal-600 shrink-0"></i>
                                    <div>
                                        <strong class="text-teal-700">Provincial Police:</strong>
                                        <span class="text-gray-600">Lead state management on Immigration & Residence.</span>
                                    </div>
                                </div>
                                <div class="flex items-center gap-3 bg-gray-50 p-3 rounded-lg">
                                    <i data-lucide="briefcase" class="w-5 h-5 text-blue-600 shrink-0"></i>
                                    <div>
                                        <strong class="text-blue-700">Home Affairs Dept:</strong>
                                        <span class="text-gray-600">Lead management of foreign labor.</span>
                                    </div>
                                </div>
                                <div class="flex items-center gap-3 bg-gray-50 p-3 rounded-lg">
                                    <i data-lucide="globe" class="w-5 h-5 text-purple-600 shrink-0"></i>
                                    <div>
                                        <strong class="text-purple-700">Foreign Affairs Dept:</strong>
                                        <span class="text-gray-600">Manage official guests, consular work.</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Section 2 -->
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-teal-100 text-teal-600 w-6 h-6 rounded-full flex items-center justify-center text-xs">2</span>
                                Specialized Dept Responsibilities
                            </h5>
                            <div class="grid md:grid-cols-2 gap-3 text-xs">
                                <div class="bg-blue-50/50 p-3 rounded-lg border border-blue-100">
                                    <strong class="text-blue-700 block mb-1">Education Dept</strong>
                                    <span>Manage foreigners in education. Coordinate with Police when inviting teachers.</span>
                                2</div>
                                <div class="bg-pink-50/50 p-3 rounded-lg border border-pink-100">
                                    <strong class="text-pink-700 block mb-1">Health Dept</strong>
                                    <span>Report practice certificates to Police <strong>before 15th monthly</strong>.</span>
                                </div>
                                <div class="bg-orange-50/50 p-3 rounded-lg border border-orange-100">
                                    <strong class="text-orange-700 block mb-1">Industry & Trade</strong>
                                    <span>Manage rep offices. Report <strong>7 days prior</strong> to foreigner arrival.</span>
                                </div>
                                <div class="bg-cyan-50/50 p-3 rounded-lg border border-cyan-100">
                                    <strong class="text-cyan-700 block mb-1">Industrial Zones Auth</strong>
                                    <span>Review residence/planning in IZs, handle strikes involving foreigners.</span>
                                </div>
                            </div>
                        </div>

                        <!-- Section 3 & 4 Grid -->
                        <div class="grid md:grid-cols-2 gap-4">
                            <!-- Section 3 -->
                            <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                                <h5 class="font-bold text-gray-900 mb-2 text-sm border-b pb-2 border-gray-100 flex items-center gap-2">
                                    <span class="bg-red-100 text-red-600 w-5 h-5 rounded-full flex items-center justify-center text-xs">!</span>
                                    Special Situations
                                </h5>
                                <ul class="space-y-2 text-xs">
                                    <li class="flex gap-2">
                                        <i data-lucide="alert-triangle" class="w-3 h-3 text-red-500 mt-0.5 shrink-0"></i>
                                        <span><strong>Accident/Death:</strong> Notify MFA within <strong>12 hours</strong>.</span>
                                    </li>
                                    <li class="flex gap-2">
                                        <i data-lucide="shield" class="w-3 h-3 text-purple-500 mt-0.5 shrink-0"></i>
                                        <span><strong>Privileged Foreigners:</strong> Foreign Affairs Dept handles diplomatically.</span>
                                    </li>
                                    <li class="flex gap-2">
                                        <i data-lucide="log-out" class="w-3 h-3 text-cand-red mt-0.5 shrink-0"></i>
                                        <span><strong>Expulsion:</strong> Provincial Police executes.</span>
                                    </li>
                                </ul>
                            </div>
                            
                            <!-- Section 4 -->
                            <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                                <h5 class="font-bold text-gray-900 mb-2 text-sm border-b pb-2 border-gray-100 flex items-center gap-2">
                                    <i data-lucide="calendar-check" class="w-4 h-4 text-teal-600"></i>
                                    Reporting Mechanism
                                </h5>
                                <ul class="space-y-2 text-xs">
                                    <li>• <strong>Monthly:</strong> Before 15th → Provincial Police.</li>
                                    <li>• <strong>6-monthly:</strong> Before Jun 15 → Immigration Office.</li>
                                    <li>• <strong>Annual:</strong> Before Dec 15 → Immigration Office.</li>
                                    <li>• <strong>Stay Declaration:</strong> via MPS online portal.</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Section 5 -->
                        <div class="bg-teal-50/50 p-4 rounded-xl border border-teal-100">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base">
                                <span class="bg-teal-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs">5</span>
                                Sponsor/Host Responsibilities
                            </h5>
                                <ul class="text-sm space-y-2 ml-1">
                                <li class="flex gap-2">
                                    <i data-lucide="megaphone" class="w-4 h-4 text-teal-600 mt-0.5"></i>
                                    <span>Coordinate to propagate VN laws to foreigners, prevent violations.</span>
                                </li>
                                <li class="flex gap-2">
                                    <i data-lucide="handshake" class="w-4 h-4 text-teal-600 mt-0.5"></i>
                                    <span>Coordinate to resolve arising incidents related to sponsored persons.</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    `
                },
                zh: {
                    title: "富寿省外国人居留、活动管理协调规制",
                    subtitle: "第 3518/2025/QĐ-CTUBND 号决定",
                    content: `
                    <div class="space-y-6 text-gray-800 font-inter">
                        <div class="bg-gradient-to-r from-teal-50 to-emerald-50 border-l-4 border-teal-500 p-5 rounded-r-xl shadow-sm">
                             <h4 class="font-bold text-teal-700 text-lg mb-2 flex items-center gap-2">
                                <i data-lucide="landmark" class="w-5 h-5"></i>
                                第 3518/2025/QĐ-CTUBND 号决定
                            </h4>
                            <p class="text-sm leading-relaxed">富寿省外国人管理协调规制，自 <strong>2025年10月28日</strong> 起生效。确立多层级管理网络，以省公安厅为“骨干”。</p>
                        </div>
                        <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <h5 class="font-bold text-gray-900 mb-3 flex items-center gap-2 text-base border-b pb-2 border-gray-100">
                                <span class="bg-teal-100 text-teal-600 w-6 h-6 rounded-full flex items-center justify-center text-xs">1</span>
                                主持机关
                            </h5>
                             <div class="grid grid-cols-1 gap-2 text-sm">
                                <div class="flex items-center gap-3 bg-gray-50 p-3 rounded-lg">
                                    <i data-lucide="shield-check" class="w-5 h-5 text-teal-600 shrink-0"></i>
                                    <div>
                                        <strong class="text-teal-700">省公安厅:</strong>
                                        <span class="text-gray-600">主持出入境、外国人居留的国家管理。</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    `
                }
            },
        };

        function openModal(id) {
            const data = docData[id];
            if (!data) return;

            let title = data.title;
            let content = data.content;

            // Multi-language support
            if (data.vi && data.en) {
                const lang = currentLang || 'vi';
                title = data[lang].title;
                content = data[lang].content;
            }

            document.getElementById('modalTitle').innerText = title;
            document.getElementById('modalBody').innerHTML = content;
            document.getElementById('modalPdfLink').href = data.pdfLink;

            // Re-render icons in the new content
            lucide.createIcons();

            const modal = document.getElementById('docModal');
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        function closeModal() {
            const modal = document.getElementById('docModal');
            modal.classList.add('hidden');
            document.body.style.overflow = '';
        }

        // Close modal on escape key
        document.addEventListener('keydown', function (event) {
            if (event.key === "Escape") {
                closeModal();
            }
        });

        // Auto hide bubble on scroll
        const bubble = document.getElementById('aiBubble');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 100) {
                bubble.classList.add('opacity-0', 'translate-y-4', 'pointer-events-none');
            } else {
                bubble.classList.remove('opacity-0', 'translate-y-4', 'pointer-events-none');
            }
        });

        // ========== WELCOME MODAL FUNCTIONALITY ==========
        const welcomeTranslations = {
            vi: {
                title: "CHÀO MỪNG BẠN!",
                subtitle: "Cổng thông tin tuyên truyền pháp luật",
                org: "Phòng Quản lý xuất nhập cảnh - Công an tỉnh Phú Thọ",
                intro: "Khám phá các tính năng chính của chúng tôi:",
                feat1_title: "Thư Viện Văn Bản Pháp Luật",
                feat1_desc: "Tra cứu nhanh các nghị định, luật và quy chế về xuất nhập cảnh.",
                feat2_title: "Xem Nhanh & Tóm Tắt",
                feat2_desc: "Nắm bắt nội dung chính của văn bản mà không cần mở file PDF.",
                feat3_title: "Trợ Lý AI Pháp Luật",
                feat3_desc: "Hỏi đáp thủ tục visa, cư trú với trí tuệ nhân tạo 24/7.",
                feat4_title: "Hỗ trợ Song ngữ",
                feat4_desc: "Giao diện và nội dung có sẵn bằng cả Tiếng Việt và Tiếng Anh.",
                btn: "Bắt đầu khám phá",
                checkbox: "Không hiển thị lại",
                campaign_title: "Cao điểm 70 ngày đêm",
                campaign_desc: "Tiên phong chuyển đổi số - Lập thành tích chào mừng các ngày lễ lớn."
            },
            en: {
                title: "WELCOME!",
                subtitle: "Legal Information Portal",
                org: "Immigration Department - Phu Tho Provincial Police",
                intro: "Explore our key features:",
                feat1_title: "Legal Document Library",
                feat1_desc: "Quickly search decrees, laws, and regulations on immigration.",
                feat2_title: "Quick View & Summary",
                feat2_desc: "Grasp the main content without opening PDF files.",
                feat3_title: "Legal AI Assistant",
                feat3_desc: "Ask about visa and residence procedures with 24/7 AI.",
                feat4_title: "Bilingual Support",
                feat4_desc: "Interface and content available in both Vietnamese and English.",
                btn: "Start Exploring",
                checkbox: "Don't show again",
                campaign_title: "70-Day Peak Campaign",
                campaign_desc: "Pioneering Digital Transformation - Celebrating Major Holidays."
            },
            zh: {
                title: "欢迎！",
                subtitle: "法律宣传信息门户",
                org: "出入境管理处 - 富寿省公安厅",
                intro: "探索我们的主要功能：",
                feat1_title: "法律文件库",
                feat1_desc: "快速查询关于出入境的议定、法律和规制。",
                feat2_title: "快速查看和摘要",
                feat2_desc: "无需打开 PDF 文件即可掌握文件主要内容。",
                feat3_title: "法律 AI 助手",
                feat3_desc: "通过 24/7 人工智能咨询签证、居留手续。",
                feat4_title: "多语言支持",
                feat4_desc: "界面和内容提供越南语、英语和中文。",
                btn: "开始探索",
                checkbox: "不再显示",
                campaign_title: "70 天巅峰冲刺",
                campaign_desc: "数字化转型先锋 -以此成绩庆祝各大节日。"
            }
        };

        function updateWelcomeModalLang(lang) {
            const t = welcomeTranslations[lang];
            document.getElementById('welcome-title').innerText = t.title;
            document.getElementById('welcome-subtitle').innerText = t.subtitle;
            document.getElementById('welcome-org').innerText = t.org;
            document.getElementById('welcome-intro').innerText = t.intro;
            document.getElementById('welcome-feat1-title').innerText = t.feat1_title;
            document.getElementById('welcome-feat1-desc').innerText = t.feat1_desc;
            document.getElementById('welcome-feat2-title').innerText = t.feat2_title;
            document.getElementById('welcome-feat2-desc').innerText = t.feat2_desc;
            document.getElementById('welcome-feat3-title').innerText = t.feat3_title;
            document.getElementById('welcome-feat3-desc').innerText = t.feat3_desc;
            document.getElementById('welcome-feat4-title').innerText = t.feat4_title;
            document.getElementById('welcome-feat4-desc').innerText = t.feat4_desc;
            document.getElementById('welcome-btn').innerText = t.btn;
            document.getElementById('welcome-checkbox').innerText = t.checkbox;
            document.getElementById('welcome-campaign-title').innerText = t.campaign_title;
            document.getElementById('welcome-campaign-desc').innerText = t.campaign_desc;
        }

        function showWelcomeModal() {
            const modal = document.getElementById('welcomeModal');
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            lucide.createIcons(); // Render icons in modal
            updateWelcomeModalLang(currentLang);
        }

        function closeWelcomeModal() {
            const modal = document.getElementById('welcomeModal');
            modal.classList.add('hidden');
            document.body.style.overflow = '';

            // Save preference if checkbox is checked
            if (document.getElementById('dontShowAgain').checked) {
                localStorage.setItem('hideWelcomeModal', 'true');
            }
        }

        // Show welcome modal on page load (unless user opted out)
        window.addEventListener('DOMContentLoaded', () => {
            if (localStorage.getItem('hideWelcomeModal') !== 'true') {
                // Small delay for smoother UX
                setTimeout(showWelcomeModal, 500);
            }
        });

        // ========== SERVICE WORKER REGISTRATION ==========
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('SW registered:', registration);
                    })
                    .catch(error => {
                        console.log('SW registration failed:', error);
                    });
            });
        }

        // ========== SECURITY: XSS PREVENTION ==========
        function sanitizeHTML(str) {
            const escapeMap = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#39;',
                '/': '&#x2F;',
                '`': '&#x60;',
                '=': '&#x3D;'
            };
            return String(str).replace(/[&<>"'`=\/]/g, s => escapeMap[s]);
        }

        // ========== FAKE CHAT FUNCTIONALITY ==========
        function handleChatSend() {
            const input = document.getElementById('fakeChatInput');
            const query = input.value.trim();
            if (!query) return;

            // SECURITY: Sanitize user input before inserting into DOM
            const safeQuery = sanitizeHTML(query);

            // Add user message to UI
            const history = document.getElementById('chatHistory');
            const userMsg = `
                <div class="flex justify-end animate-fade-in-up">
                    <div class="bg-cand-red text-white px-4 py-3 rounded-2xl rounded-tr-sm shadow-md max-w-[90%] text-sm">
                        ${safeQuery}
                    </div>
                </div>
            `;
            history.insertAdjacentHTML('beforeend', userMsg);
            input.value = '';

            // Scroll to bottom
            history.scrollTop = history.scrollHeight;

            // Simulate thinking
            const loadingMsg = `
                <div class="flex justify-start animate-fade-in-up" id="loadingBubble">
                    <div class="bg-white text-gray-500 border border-gray-200 px-4 py-3 rounded-2xl rounded-tl-sm shadow-sm">
                        <span class="flex items-center gap-1.5">
                            <span class="w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce"></span>
                            <span class="w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></span>
                            <span class="w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.4s"></span>
                        </span>
                    </div>
                </div>
            `;
            history.insertAdjacentHTML('beforeend', loadingMsg);
            history.scrollTop = history.scrollHeight;

            // Redirect after 1s
            setTimeout(() => {
                // Open NotebookLM with security attributes
                window.open('https://notebooklm.google.com/notebook/03f2338f-f7f7-4adf-aba3-52b93672b484', '_blank', 'noopener,noreferrer');

                // Update UI to show system message
                const loadingBubble = document.getElementById('loadingBubble');
                if (loadingBubble) loadingBubble.remove();

                const systemMsg = `
                     <div class="flex justify-start animate-fade-in-up">
                          <div class="bg-blue-50 text-blue-800 border border-blue-100 px-4 py-3 rounded-2xl rounded-tl-sm shadow-sm max-w-[90%] text-sm">
                              <p class="font-bold flex items-center gap-2 mb-1">
                                <i data-lucide="external-link" class="w-4 h-4"></i>
                                Đã mở kết nối!
                              </p>
                              <p>Tôi đã chuyển câu hỏi của bạn sang hệ thống NotebookLM để xử lý chi tiết hơn. Vui lòng kiểm tra tab mới.</p>
                          </div>
                     </div>
                `;
                history.insertAdjacentHTML('beforeend', systemMsg);
                history.scrollTop = history.scrollHeight;
                lucide.createIcons(); // Re-render icons
            }, 1000);
        }


        function handleChatEnter(e) {
            if (e.key === 'Enter') handleChatSend();
        }

        function fillChat(text) {
            document.getElementById('fakeChatInput').value = text;
            handleChatSend();
        }
    </script>

    <script>
        // Visitor Statistics Logic
        // Visitor Statistics Logic (Real CounterAPI.dev)
        async function updateVisitorStats() {
            const NAMESPACE = 'tuyen-truyen-phap-luat-v1';
            const TOTAL_KEY = 'total-visits';
            const INITIAL_OFFSET = 2986; // Start from this number

            // Generate Today Key: YYYY-MM-DD
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const dateKey = `${year}-${month}-${day}`;
            const TODAY_KEY = `visits-${dateKey}`;

            // Helper to format with commas
            const fmt = (n) => n.toLocaleString();

            // LocalStorage keys for fallback
            const LS_TOTAL_KEY = 'visitor_total_count';
            const LS_TODAY_KEY = 'visitor_today_count';
            const LS_DATE_KEY = 'visitor_last_date';
            const LS_VISITED_KEY = 'visitor_session_counted';

            // Get stored values
            let storedTotal = parseInt(localStorage.getItem(LS_TOTAL_KEY) || '0');
            let storedToday = parseInt(localStorage.getItem(LS_TODAY_KEY) || '0');
            const storedDate = localStorage.getItem(LS_DATE_KEY);

            // Reset today count if it's a new day
            if (storedDate !== dateKey) {
                storedToday = 0;
                localStorage.setItem(LS_DATE_KEY, dateKey);
            }

            // Check if this session was already counted
            const sessionCounted = sessionStorage.getItem(LS_VISITED_KEY);

            // If not counted in this session, increment local counts
            if (!sessionCounted) {
                storedTotal++;
                storedToday++;
                localStorage.setItem(LS_TOTAL_KEY, storedTotal.toString());
                localStorage.setItem(LS_TODAY_KEY, storedToday.toString());
                sessionStorage.setItem(LS_VISITED_KEY, 'true');
            }

            try {
                // 1. Hit Total (Increment) - only if not counted in this session
                // Using counterapi.dev: returns { "count": 123, ... }
                const totalUrl = sessionCounted
                    ? `https://api.counterapi.dev/v1/${NAMESPACE}/${TOTAL_KEY}`
                    : `https://api.counterapi.dev/v1/${NAMESPACE}/${TOTAL_KEY}/up`;

                const totalRes = await fetch(totalUrl, {
                    method: 'GET',
                    mode: 'cors'
                });

                if (!totalRes.ok) throw new Error(`HTTP ${totalRes.status}`);

                const totalData = await totalRes.json();
                const totalCount = (totalData.count || 0) + INITIAL_OFFSET;
                document.getElementById('stat-total').innerText = fmt(totalCount);

                // Sync local storage with API value
                localStorage.setItem(LS_TOTAL_KEY, (totalData.count || 0).toString());

                // 2. Hit Today (Increment) - only if not counted in this session
                const todayUrl = sessionCounted
                    ? `https://api.counterapi.dev/v1/${NAMESPACE}/${TODAY_KEY}`
                    : `https://api.counterapi.dev/v1/${NAMESPACE}/${TODAY_KEY}/up`;

                const todayRes = await fetch(todayUrl, {
                    method: 'GET',
                    mode: 'cors'
                });

                if (!todayRes.ok) throw new Error(`HTTP ${todayRes.status}`);

                const todayData = await todayRes.json();
                document.getElementById('stat-today').innerText = fmt(todayData.count || 0);

                // Sync local storage with API value
                localStorage.setItem(LS_TODAY_KEY, (todayData.count || 0).toString());

            } catch (error) {
                console.error('API error, using local fallback:', error);
                // Use localStorage fallback values
                document.getElementById('stat-total').innerText = fmt(storedTotal + INITIAL_OFFSET);
                document.getElementById('stat-today').innerText = fmt(storedToday);
            }
        }

        // Call on load
        document.addEventListener('DOMContentLoaded', updateVisitorStats);
    </script>

    <script>
        // ========== KEYBOARD NAVIGATION (ACCESSIBILITY) ==========
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                // Close document modal
                const docModal = document.getElementById('docModal');
                if (docModal && !docModal.classList.contains('hidden')) {
                    docModal.classList.add('hidden');
                    document.body.style.overflow = '';
                }

                // Close welcome modal
                const welcomeModal = document.getElementById('welcomeModal');
                if (welcomeModal && !welcomeModal.classList.contains('hidden')) {
                    welcomeModal.classList.add('hidden');
                    document.body.style.overflow = '';
                }

                // Close mobile menu
                const mobileMenu = document.getElementById('mobileMenu');
                if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                    mobileMenu.classList.add('hidden');
                }
            }
        });

        // Initialize Lucide icons after DOM is ready (since script is deferred)
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });
    </script>

</body>

</html>